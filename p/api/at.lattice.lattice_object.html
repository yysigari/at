
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>at.lattice.lattice_object &#8212; Accelerator Toolbox 0.0.4 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom_at.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'p/api/at.lattice.lattice_object';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="at.lattice.options" href="at.lattice.options.html" />
    <link rel="prev" title="at.lattice.idtable_element" href="at.lattice.idtable_element.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../_static/AT.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/AT.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="../index.html">
                        Python
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../m/index.html">
                        Matlab
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../pabout.html">
                        About
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/atcollab/at" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="../index.html">
                        Python
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../m/index.html">
                        Matlab
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../pabout.html">
                        About
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/atcollab/at" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">pyAT</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How to:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../howto/Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/multiprocessing.html">Parallel processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/Primer.html">PyAT Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/CavityControl.html">Cavity Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/Collective.html">Collective</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Packages:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="at.acceptance.html">at.acceptance</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.acceptance.html">at.acceptance.acceptance</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.boundary.html">at.acceptance.boundary</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.touschek.html">at.acceptance.touschek</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.collective.html">at.collective</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.collective.beam_loading.html">at.collective.beam_loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.haissinski.html">at.collective.haissinski</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_elements.html">at.collective.wake_elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_functions.html">at.collective.wake_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_object.html">at.collective.wake_object</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="at.lattice.html">at.lattice</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="at.lattice.axisdef.html">at.lattice.axisdef</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.cavity_access.html">at.lattice.cavity_access</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.deprecated.html">at.lattice.deprecated</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.elements.html">at.lattice.elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.idtable_element.html">at.lattice.idtable_element</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">at.lattice.lattice_object</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.options.html">at.lattice.options</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.particle_object.html">at.lattice.particle_object</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.utils.html">at.lattice.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.variable_elements.html">at.lattice.variable_elements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.load.html">at.load</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.load.allfiles.html">at.load.allfiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.elegant.html">at.load.elegant</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.matfile.html">at.load.matfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.reprfile.html">at.load.reprfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.tracy.html">at.load.tracy</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.utils.html">at.load.utils</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.matching.html">at.matching</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.matching.globalfit.html">at.matching.globalfit</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.matching.matching.html">at.matching.matching</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.physics.html">at.physics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.physics.amat.html">at.physics.amat</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.diffmatrix.html">at.physics.diffmatrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.energy_loss.html">at.physics.energy_loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.fastring.html">at.physics.fastring</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.frequency_maps.html">at.physics.frequency_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.harmonic_analysis.html">at.physics.harmonic_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.linear.html">at.physics.linear</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.matrix.html">at.physics.matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.nonlinear.html">at.physics.nonlinear</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.orbit.html">at.physics.orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.radiation.html">at.physics.radiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.revolution.html">at.physics.revolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.ring_parameters.html">at.physics.ring_parameters</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.plot.html">at.plot</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.plot.generic.html">at.plot.generic</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.specific.html">at.plot.specific</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.standalone.html">at.plot.standalone</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.synopt.html">at.plot.synopt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.tracking.html">at.tracking</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.atpass.html">at.tracking.atpass</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.deprecated.html">at.tracking.deprecated</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.particles.html">at.tracking.particles</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.track.html">at.tracking.track</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.utils.html">at.tracking.utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="at.constants.html">at.constants</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="module-at.lattice.lattice_object">
<span id="at-lattice-lattice-object"></span><h1>at.lattice.lattice_object<a class="headerlink" href="#module-at.lattice.lattice_object" title="Permalink to this heading">#</a></h1>
<p>Lattice object</p>
<p>The methods implemented in this module are internal to the ‘lattice’ package.
This is necessary to ensure that the ‘lattice’ package is independent of other
AT packages.</p>
<p>Other Lattice methods are implemented in other AT packages and are available
as soon as the package is imported. The ‘tracking’ and ‘physics’ packages are
automatically imported.</p>
<p>As an example, see the at.physics.orbit module</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.lattice.lattice_object.type_filter" title="at.lattice.lattice_object.type_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">type_filter</span></code></a>(params, elems)</p></td>
<td><p>Run through all elements and check element validity.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at.lattice.lattice_object.params_filter" title="at.lattice.lattice_object.params_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">params_filter</span></code></a>(params, elem_filter, *args)</p></td>
<td><p>Run through all elements, looking for energy and periodicity.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.lattice.lattice_object.lattice_filter" title="at.lattice.lattice_object.lattice_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lattice_filter</span></code></a>(params, lattice)</p></td>
<td><p>Copy lattice parameters and run through all lattice elements</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at.lattice.lattice_object.elem_generator" title="at.lattice.lattice_object.elem_generator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">elem_generator</span></code></a>(params, elems)</p></td>
<td><p>Run through all elements without any check</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.lattice.lattice_object.no_filter" title="at.lattice.lattice_object.no_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">no_filter</span></code></a>(params, elems)</p></td>
<td><p>Run through all elements without any check</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Lattice</span></code></a>()</p></td>
<td><p>Lattice object.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Lattice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elements</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Lattice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">iterator=iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**params</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p>
<p>Lattice object.</p>
<p>An AT lattice is a sequence of AT elements. In addition to <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>
methods, <a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> supports
<a class="reference external" href="https://numpy.org/doc/stable/user/basics.indexing.html#advanced-indexing">extended indexing</a> as a numpy <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elements</strong> – iterable of Element objects</p></li>
<li><p><strong>iter</strong> – function called as <code class="code highlight pycode python docutils literal highlight-python"><span class="nb">iter</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></code>. It must
return an iterable of <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> objects for building
the lattice. It must also fill the <em>params</em> dictionary providing
the Lattice attributes.</p></li>
<li><p><strong>params</strong> – dictionary of lattice parameters. A custom iterator may
add, remove or modify parameters. Finally, the remaining
parameters will be set as Lattice attributes.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name=''</strong> – Name of the lattice</p></li>
<li><p><strong>energy</strong> – Energy of the lattice</p></li>
<li><p><strong>periodicity=1</strong> – Number of periods</p></li>
<li><p><strong>particle='relativistic'</strong> – circulating particle. May be
‘relativistic’, ‘electron’, ‘positron’, ‘proton’
or a Particle object</p></li>
<li><p><strong>iterator=None</strong> – custom iterator (see below)</p></li>
<li><p><strong>*</strong> – all other keywords will be set as attributes of
the Lattice object</p></li>
<li><p><strong>beam_current</strong> – Total current in the beam, used for collective
effects</p></li>
</ul>
</dd>
</dl>
<p>An iterator <code class="docutils literal notranslate"><span class="pre">it</span></code> is called as <code class="docutils literal notranslate"><span class="pre">it(params,</span> <span class="pre">*args)</span></code> where <code class="docutils literal notranslate"><span class="pre">args</span></code>
and <code class="docutils literal notranslate"><span class="pre">params</span></code> are the arguments of the <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> constructor. It
must yield the AT <code class="docutils literal notranslate"><span class="pre">Elements</span></code> for building the lattice. It must
also fill its <code class="docutils literal notranslate"><span class="pre">params</span></code> dictionary argument, which will be used to
set the <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> attributes.
An iterator can be:</p>
<ul class="simple">
<li><p>a “generator” which yields elements from scratch.
Examples: a list, or a file iterator,</p></li>
<li><p>a “filter” which runs through an input iterator, processes each
element, possibly adds parameters to the params dictionary
and yields the processed elements.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To reduce the inter-package dependencies, some methods of the
lattice object are defined in other AT packages, in the module where
the underlying function is implemented.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to define a filling pattern for the beam using the
function <code class="docutils literal notranslate"><span class="pre">ring.set_fillingpattern()</span></code>. The default configuration
(no arguments) is for single bunch and is the one loaded at lattice
initialization. See function help for details.
Changing <code class="docutils literal notranslate"><span class="pre">Lattice.harmonic_number</span></code> will reset the filling pattern
to its default configuration.
The beam current can be changed with
<code class="docutils literal notranslate"><span class="pre">Lattice.beam_current=current</span></code>
The filling pattern and beam current are used by collective effects
passmethods.</p>
</div>
<p class="rubric">Examples</p>
<p>Chaining iterators (taken from <code class="docutils literal notranslate"><span class="pre">load_mat</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Lattice</span><span class="p">(</span><span class="n">ringparam_filter</span><span class="p">,</span> <span class="n">matfile_generator</span><span class="p">,</span> <span class="n">filename</span>
        <span class="n">iterator</span><span class="o">=</span><span class="n">params_filter</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">matfile_generator(params,</span> <span class="pre">filename)</span></code></dt><dd><p>opens filename and generates AT elements for each cell of the
Matlab cell array representing the lattice,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ringparam_filter(params,</span> <span class="pre">matfile_generator,</span> <span class="pre">*args)</span></code></dt><dd><p>runs through <code class="docutils literal notranslate"><span class="pre">matfile_generator(params,</span> <span class="pre">*args)</span></code>, looks for
RingParam elements, fills params with their information and
discards them,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">params_filter(params,</span> <span class="pre">ringparam_filter,</span> <span class="pre">*args)</span></code></dt><dd><p>runs through <code class="docutils literal notranslate"><span class="pre">ringparam_filter(params,</span> <span class="pre">*args)</span></code>, looks for
energy and periodicity if not yet defined.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.append" title="Permalink to this definition">#</a></dt>
<dd><p>This method overwrites the inherited method
<code class="xref py py-meth docutils literal notranslate"><span class="pre">list.append()</span></code>,
it behavior is changed, it accepts only AT lattice elements
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Element</span></code> as input argument.</p>
<p>Equivalents syntaxes:
&gt;&gt;&gt; ring.append(elem)
&gt;&gt;&gt; ring += [elem]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elem</strong> (<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a>) – AT element to be appended to the lattice</p></li>
<li><p><strong>copy_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> a deep copy of elem
is used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.attrs_filter">
<span class="sig-name descname"><span class="pre">attrs_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem_filter</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.attrs_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.attrs_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Filter function which duplicates the lattice attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Dictionary of Lattice attributes</p></li>
<li><p><strong>elem_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>]</em>) – Element filter</p></li>
<li><p><strong>*args</strong> – Arguments provided to <em>elem_filter</em></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.avlinopt">
<span class="sig-name descname"><span class="pre">avlinopt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.avlinopt" title="Permalink to this definition">#</a></dt>
<dd><p>Linear analysis of a lattice with average values</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.avlinopt" title="at.lattice.lattice_object.Lattice.avlinopt"><code class="xref py py-func docutils literal notranslate"><span class="pre">avlinopt()</span></code></a> returns average beta, mu, dispersion over the lattice
elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation.</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – <p>Elements at which data is returned.
It can be:</p>
<ol class="arabic simple">
<li><p>an integer in the range [-len(ring), len(ring)-1]
selecting the element according to python indexing rules.
As a special case, len(ring) is allowed and refers to the end
of the last element,</p></li>
<li><p>an ordered list of such integers without duplicates,</p></li>
<li><p>a numpy array of booleans of maximum length len(ring)+1,
where selected elements are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
</ol>
</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>get_chrom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Compute chromaticities. Needs computing
the tune at 2 different momentum deviations around the central one.</p></li>
<li><p><strong>get_w</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Computes chromatic amplitude functions
(W) <a class="footnote-reference brackets" href="#id6" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. Needs to compute the optics at 2 different momentum
deviations around the central one.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – <p>Initial conditions for transfer line optics.
Record array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or dictionary. Keys:</p>
<dl class="simple">
<dt>R or alpha, beta</dt><dd><p>mandatory (2,) arrays</p>
</dd>
<dt>closed_orbit</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
<dt>dispersion</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
</dl>
<p>If present, the attribute <strong>R</strong> will be used, otherwise the
attributes <strong>alpha</strong> and <strong>beta</strong> will be used. All other attributes
are ignored.</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elemdata</strong> – Linear optics at the points refered to by <em>refpts</em>,
if refpts is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> an empty lindata structure is returned.</p></li>
<li><p><strong>avebeta</strong> – Average beta functions [<span class="math notranslate nohighlight">\(\hat{\beta_x},\hat{\beta_y}\)</span>]
at <em>refpts</em></p></li>
<li><p><strong>avemu</strong> – Average phase advances [<span class="math notranslate nohighlight">\(\hat{\mu_x},\hat{\mu_y}\)</span>]
at <em>refpts</em></p></li>
<li><p><strong>avedisp</strong> – Average dispersion [<span class="math notranslate nohighlight">\(\hat{\eta_x}, \hat{\eta'_x},
\hat{\eta_y}, \hat{\eta'_y}\)</span>] at <em>refpts</em></p></li>
<li><p><strong>avespos</strong> – Average s position at <em>refpts</em></p></li>
<li><p><strong>tune</strong> – [<span class="math notranslate nohighlight">\(\nu_1,\nu_2\)</span>], linear tunes for the two normal
modes of linear motion [1]</p></li>
<li><p><strong>chrom</strong> – [<span class="math notranslate nohighlight">\(\xi_1,\xi_2\)</span>], chromaticities</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt4" title="at.lattice.lattice_object.Lattice.linopt4"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt4()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.get_optics" title="at.lattice.lattice_object.Lattice.get_optics"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_optics()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.bool_refpts">
<span class="sig-name descname"><span class="pre">bool_refpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.bool_refpts" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a bool array of element indices, selecting ring elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, allow <em>len(ring)</em> as a
special index, referring to the end of the last element.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bool_refs</strong> (<em>BoolRefpts</em>) – A bool numpy array used for indexing
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s in a lattice.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">Quadrupole</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Quadrupole" title="at.lattice.elements.Quadrupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Quadrupole</span></code></a>
are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="s2">&quot;Q[FD]*&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements whose <em>FamName</em>
matches “Q[FD]*” are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">checkattr</span><span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements whose <em>K</em>
attribute is 0.0 are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of <em>len(ring)+1</em> <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.concatenate">
<span class="sig-name descname"><span class="pre">concatenate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">lattices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.concatenate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.concatenate" title="Permalink to this definition">#</a></dt>
<dd><p>Concatenate several <cite>Iterable[Element]</cite> with the lattice</p>
<p>Equivalents syntaxes:
&gt;&gt;&gt; newring = ring.concatenate(r1, r2, r3, copy=True)
&gt;&gt;&gt; newring = ring + r1 + r2 + r3</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span> <span class="o">+=</span> <span class="n">r1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lattices</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – <code class="xref py py-obj docutils literal notranslate"><span class="pre">Iterables[Element]</span></code> to be concatenanted
to the Lattice, several lattices are allowed
(see example)</p></li>
<li><p><strong>copy_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>
deepcopies of the elements of lattices are used</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>
the lattice is modified in place.
Oterwise a new Lattice object is returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>lattice</strong> (<em>Lattice</em>) – concatenated Lattice, if <cite>copy==True</cite> the
new lattice object is returned
otherwise None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.copy" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a shallow copy of the lattice</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.deepcopy">
<span class="sig-name descname"><span class="pre">deepcopy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.deepcopy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.deepcopy" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a deep copy of the lattice</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.develop">
<span class="sig-name descname"><span class="pre">develop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.develop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.develop" title="Permalink to this definition">#</a></dt>
<dd><p>Develop a periodical lattice by repeating its elements
<em>self.periodicity</em> times</p>
<p>The elements of the new lattice are deep copies ot the original
elements, so that they are all independent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>newlattice</strong> – The developed lattice</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.disable_6d">
<span class="sig-name descname"><span class="pre">disable_6d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">elem_class[,</span> <span class="pre">elem_class]...</span> <span class="pre">,</span> <span class="pre">copy=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.disable_6d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.disable_6d" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">disable_6d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cavity_pass='auto'[,</span> <span class="pre">dipole_pass='auto']...,</span> <span class="pre">copy=False</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span></dt>
<dd><p>Turn longitudinal motion off. By default, remove all longitudinal
motion.</p>
<p>Modify the lattice in-place or creates a new lattice, depending on the
<code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword argument.</p>
<p><strong>Syntax using positional arguments:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>elem_class</strong> – <p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.LongtMotion" title="at.lattice.elements.LongtMotion"><code class="xref py py-class docutils literal notranslate"><span class="pre">LongtMotion</span></code></a> subclass.
Longitudinal motion is turned off for elements which are
instances of any given <code class="docutils literal notranslate"><span class="pre">elem_class</span></code>.</p>
<p>In adition to single element classes, a few grouping classes are
available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.LongtMotion" title="at.lattice.elements.LongtMotion"><code class="xref py py-class docutils literal notranslate"><span class="pre">LongtMotion</span></code></a>: all elements possibly acting on
momentum,</p></li>
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Radiative" title="at.lattice.elements.Radiative"><code class="xref py py-class docutils literal notranslate"><span class="pre">Radiative</span></code></a>: default radiative elements:
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Dipole" title="at.lattice.elements.Dipole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dipole</span></code></a>, <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Quadrupole" title="at.lattice.elements.Quadrupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Quadrupole</span></code></a>,
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Wiggler" title="at.lattice.elements.Wiggler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wiggler</span></code></a>,</p></li>
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Collective" title="at.lattice.elements.Collective"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collective</span></code></a>: all elements dealing with collective
effects.</p></li>
</ul>
<p>The default PassMethod conversion is used, as with the <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>
keyword value.</p>
<p><strong>No keyword except</strong> <code class="docutils literal notranslate"><span class="pre">copy</span></code> <strong>is allowed in this syntax.</strong></p>
</p>
</dd>
</dl>
<p><strong>Syntax using keyword arguments:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_pass</strong> – PassMethod overloading the default
values for all elements (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or ‘auto’)</p></li>
<li><p><strong>cavity_pass='auto'</strong> – PassMethod set on cavities</p></li>
<li><p><strong>dipole_pass='auto'</strong> – PassMethod set on dipoles</p></li>
<li><p><strong>quadrupole_pass=auto</strong> – PassMethod set on quadrupoles</p></li>
<li><p><strong>wiggler_pass='auto'</strong> – PassMethod set on wigglers</p></li>
<li><p><strong>sextupole_pass='auto'</strong> – PassMethod set on sextupoles</p></li>
<li><p><strong>octupole_pass='auto'</strong> – PassMethod set on octupoles</p></li>
<li><p><strong>multipole_pass='auto'</strong> – PassMethod set on higher order
multipoles</p></li>
<li><p><strong>collective_pass='auto'</strong> – PassMethod set on collective effect
elements (<a class="reference internal" href="at.collective.wake_elements.html#at.collective.wake_elements.WakeElement" title="at.collective.wake_elements.WakeElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">WakeElement</span></code></a>,…)</p></li>
<li><p><strong>diffusion_pass='auto'</strong> – PassMethod set on
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.QuantumDiffusion" title="at.lattice.elements.QuantumDiffusion"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuantumDiffusion</span></code></a></p></li>
<li><p><strong>copy=False</strong> – <p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, the modification is done in-place,
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a shallow copy of the lattice. Only the
radiating elements are copied with PassMethod modified.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>a shallow copy means that all non-modified elements are shared
with the original lattice. Any further modification will
affect both lattices.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<p>For PassMethod names, the convention is:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>:        no change</p></li>
<li><p>‘auto’:          Use the default conversion (replace *RadPass by
*Pass)</p></li>
<li><p>anything else:   set as the new PassMethod</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">disable_6d</span><span class="p">()</span>
</pre></div>
</div>
<p>Modify <cite>ring</cite> in-place, turn OFF everything affecting the
longitudinal momentum.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">disable_6d</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">RFCavity</span><span class="p">)</span>
</pre></div>
</div>
<p>Turn cavities OFF (nothing else modified).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">disable_6d</span><span class="p">(</span><span class="n">all_pass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cavity_pass</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Same as the previous example, but using the keyword syntax.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newring</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">disable_6d</span><span class="p">(</span><span class="n">cavity_pass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Return a new Lattice (shallow copy of <cite>ring</cite>) with everything
turned OFF except RF cavities.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newring</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">disable_6d</span><span class="p">(</span><span class="n">all_pass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span><span class="n">sextupole_pass</span><span class="o">=</span><span class="s1">&#39;DriftPass&#39;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Return a new Lattice (shallow copy of <cite>ring</cite>) with sextupoles
turned into Drifts (turned off) and everything else unchangedd.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.enable_6d" title="at.lattice.lattice_object.Lattice.enable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_6d()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.enable_6d">
<span class="sig-name descname"><span class="pre">enable_6d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">elem_class[,</span> <span class="pre">elem_class]...,</span> <span class="pre">copy=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.enable_6d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.enable_6d" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">enable_6d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cavity_pass='auto'[,</span> <span class="pre">dipole_pass='auto']...,</span> <span class="pre">copy=False</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span></dt>
<dd><p>Turn longitudinal motion on. By default, turn on
radiation in dipoles and quadrupoles, turn on RF cavities, activates
collective effects and other elements acting on momentum.</p>
<p>Modify the lattice in-place or creates a new lattice, depending on the
<code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword argument.</p>
<p><strong>Syntax using positional arguments:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>elem_class</strong> – <p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.LongtMotion" title="at.lattice.elements.LongtMotion"><code class="xref py py-class docutils literal notranslate"><span class="pre">LongtMotion</span></code></a> subclass.
Longitudinal motion is turned on for elements which are
instances of any given <code class="docutils literal notranslate"><span class="pre">elem_class</span></code>.</p>
<p>In adition to single element classes, a few grouping classes are
available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.LongtMotion" title="at.lattice.elements.LongtMotion"><code class="xref py py-class docutils literal notranslate"><span class="pre">LongtMotion</span></code></a>: all elements possibly acting on
momentum,</p></li>
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Radiative" title="at.lattice.elements.Radiative"><code class="xref py py-class docutils literal notranslate"><span class="pre">Radiative</span></code></a>: default radiative elements:
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Dipole" title="at.lattice.elements.Dipole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dipole</span></code></a>, <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Quadrupole" title="at.lattice.elements.Quadrupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Quadrupole</span></code></a>,
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Wiggler" title="at.lattice.elements.Wiggler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wiggler</span></code></a>,</p></li>
<li><p><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Collective" title="at.lattice.elements.Collective"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collective</span></code></a>: all elements dealing with collective
effects.</p></li>
</ul>
<p>The default PassMethod conversion is used, as with the <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>
keyword value..</p>
<p><strong>No keyword except</strong> <code class="docutils literal notranslate"><span class="pre">copy</span></code> <strong>is allowed in this syntax.</strong></p>
</p>
</dd>
</dl>
<p><strong>Syntax using keyword arguments:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_pass</strong> – PassMethod overloading the default
values for all elements (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or ‘auto’)</p></li>
<li><p><strong>cavity_pass='auto'</strong> – PassMethod set on cavities</p></li>
<li><p><strong>dipole_pass='auto'</strong> – PassMethod set on dipoles</p></li>
<li><p><strong>quadrupole_pass='auto'</strong> – PassMethod set on quadrupoles</p></li>
<li><p><strong>wiggler_pass='auto'</strong> – PassMethod set on wigglers</p></li>
<li><p><strong>sextupole_pass=None</strong> – PassMethod set on sextupoles</p></li>
<li><p><strong>octupole_pass=None</strong> – PassMethod set on octupoles</p></li>
<li><p><strong>multipole_pass=None</strong> – PassMethod set on higher order
multipoles</p></li>
<li><p><strong>collective_pass='auto'</strong> – PassMethod set on collective effect
elements (<a class="reference internal" href="at.collective.wake_elements.html#at.collective.wake_elements.WakeElement" title="at.collective.wake_elements.WakeElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">WakeElement</span></code></a>,…)</p></li>
<li><p><strong>diffusion_pass='auto'</strong> – PassMethod set on
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.QuantumDiffusion" title="at.lattice.elements.QuantumDiffusion"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuantumDiffusion</span></code></a></p></li>
<li><p><strong>copy=False</strong> – <p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, the modification is done in-place,
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a shallow copy of the lattice. Only the
radiating elements are copied with PassMethod modified.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>a shallow copy means that all non-modified elements are shared
with the original lattice. Any further modification will
affect both lattices.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<p>For PassMethod names, the convention is:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>:        No change</p></li>
<li><p>‘auto’:          Use the default conversion (replace *Pass by
*RadPass)</p></li>
<li><p>anything else:   set as the new PassMethod</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">enable_6d</span><span class="p">()</span>
</pre></div>
</div>
<p>Modify <cite>ring</cite> in-place, turn cavities ON, turn synchrotron
radiation ON in Dipoles and Quadrupoles, turn collective effects
ON.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">enable_6d</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">RFCavity</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">Radiative</span><span class="p">)</span>
</pre></div>
</div>
<p>Modify <cite>ring</cite> in-place, turn cavities ON, turn synchrotron
radiation ON in dipoles and quadupoles.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newring</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">enable_6d</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">Collective</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a new lattice with collective effects turned ON and nothing
else changed</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newring</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">enable_6d</span><span class="p">(</span><span class="n">all_pass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collective_pass</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Same as the previous example, using the keyword syntax.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.disable_6d" title="at.lattice.lattice_object.Lattice.disable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disable_6d()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.envelope_parameters">
<span class="sig-name descname"><span class="pre">envelope_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.envelope_parameters" title="Permalink to this definition">#</a></dt>
<dd><p>Compute ring parameters from ohmi_envelope</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><em>RingParameters</em></a><em>]</em>) – <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object to be updated.
Default: create a new one</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a><em>]</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>params</strong> – <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object.</p>
</dd>
</dl>
<p><strong>params</strong> is a <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object with the following
attributes:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tunes6</strong></p></td>
<td><p>(3,) fractional (H, V, Long.) tunes (6D motion)</p></td>
</tr>
<tr class="row-even"><td><p><strong>emittances</strong></p></td>
<td><p>(3,) Mode emittances</p></td>
</tr>
<tr class="row-odd"><td><p><strong>J</strong></p></td>
<td><p>(3,) Damping partition numbers</p></td>
</tr>
<tr class="row-even"><td><p><strong>Tau</strong></p></td>
<td><p>(3,) Damping times [s]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sigma_e</strong></p></td>
<td><p>Energy spread</p></td>
</tr>
<tr class="row-even"><td><p><strong>sigma_l</strong></p></td>
<td><p>Bunch length [m]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>voltage</strong></p></td>
<td><p>Total accelerating voltage [V]</p></td>
</tr>
<tr class="row-even"><td><p><strong>phi_s</strong></p></td>
<td><p>Synchrotron phase [rad]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>f_s</strong></p></td>
<td><p>Synchrotron frequency [Hz]</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elems</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.extend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.extend" title="Permalink to this definition">#</a></dt>
<dd><p>This method adds all the elements of <cite>elems</cite> to the end of the
lattice. The behavior is the same as for a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a></p>
<p>Equivalents syntaxes:
&gt;&gt;&gt; ring.extend(elems)
&gt;&gt;&gt; ring += elems</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elems</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Sequence of AT elements to be
appended to the lattice</p></li>
<li><p><strong>copy_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> deep copies of each
element of elems are used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_m44">
<span class="sig-name descname"><span class="pre">find_m44</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_m44" title="Permalink to this definition">#</a></dt>
<dd><p>One turn 4x4 transfer matrix</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m44" title="at.lattice.lattice_object.Lattice.find_m44"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m44()</span></code></a> finds the 4x4 transfer matrix of an accelerator
lattice by differentiation of trajectories near the closed orbit.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m44" title="at.lattice.lattice_object.Lattice.find_m44"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m44()</span></code></a> assumes constant momentum deviation.
The <code class="docutils literal notranslate"><span class="pre">PassMethod</span></code> used for any element <strong>SHOULD NOT</strong>:</p>
<ol class="arabic simple">
<li><p>change the longitudinal momentum dP
(cavities , magnets with radiation, …)</p></li>
<li><p>have any time dependence (localized impedance, fast kickers, …)</p></li>
</ol>
</div>
<p>Unless an input orbit is introduced, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m44" title="at.lattice.lattice_object.Lattice.find_m44"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m44()</span></code></a> assumes that the
lattice is a ring and first finds the closed orbit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description (radiation must be OFF)</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation.</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Path lengthening.</p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Deviation of RF frequency.</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a><em>]</em>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array).</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>full</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, matrices are full 1-turn matrices
at the entrance of each element indexed by refpts. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>
(Default), matrices are between the entrance of the first element and
the entrance of the selected element</p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m44</strong> – full one-turn matrix at the entrance of the first element</p></li>
<li><p><strong>ms</strong> – 4x4 transfer matrices between the entrance of the first
element and each element indexed by refpts: (Nrefs, 4, 4) array</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m66" title="at.lattice.lattice_object.Lattice.find_m66"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m66()</span></code></a>, <a class="reference internal" href="at.physics.orbit.html#at.physics.orbit.find_orbit4" title="at.physics.orbit.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_m66">
<span class="sig-name descname"><span class="pre">find_m66</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_m66" title="Permalink to this definition">#</a></dt>
<dd><p>One-turn 6x6 transfer matrix</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m66" title="at.lattice.lattice_object.Lattice.find_m66"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m66()</span></code></a> finds the 6x6 transfer matrix of an accelerator
lattice by differentiation of trajectories near the closed orbit.</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m66" title="at.lattice.lattice_object.Lattice.find_m66"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m66()</span></code></a> uses <a class="reference internal" href="at.physics.orbit.html#at.physics.orbit.find_orbit6" title="at.physics.orbit.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a> to search for the closed
orbit in 6-D. In order for this to work the ring <strong>MUST</strong> have a <code class="docutils literal notranslate"><span class="pre">Cavity</span></code>
element</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array).</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m66</strong> – full one-turn matrix at the entrance of the first element</p></li>
<li><p><strong>ms</strong> – 6x6 transfer matrices between the entrance of the first
element and each element indexed by refpts: (Nrefs, 6, 6) array</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_m44" title="at.lattice.lattice_object.Lattice.find_m44"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_m44()</span></code></a>, <a class="reference internal" href="at.physics.orbit.html#at.physics.orbit.find_orbit6" title="at.physics.orbit.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_orbit">
<span class="sig-name descname"><span class="pre">find_orbit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_orbit" title="Permalink to this definition">#</a></dt>
<dd><p>Gets the closed orbit in the general case</p>
<p>Depending on the lattice, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit" title="at.lattice.lattice_object.Lattice.find_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit()</span></code></a> will:</p>
<ul class="simple">
<li><p>use <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a> if <a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>,</p></li>
<li><p>use <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a> if <a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> and
<em>dct</em> or <em>df</em> is specified,</p></li>
<li><p>use <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a> otherwise.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for initial the closed
orbit if it is already known. <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit" title="at.lattice.lattice_object.Lattice.find_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit()</span></code></a> propagates it
to the specified <em>refpts</em>.</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation from the nominal RF frequency.
Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>guess</strong> (<em>Orbit</em>) – (6,) initial value for the closed orbit.
It may help convergence. Default: (0, 0, 0, 0, 0, 0)</p></li>
<li><p><strong>convergence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Convergence criterion.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbConvergence</span></code></a></p></li>
<li><p><strong>max_iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Maximum number of iterations.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbMaxIter</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
</ul>
</dd>
</dl>
<p>For other keywords, refer to the underlying methods</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orbit0</strong> – (6,) closed orbit vector at the entrance of the
1-st element (x,px,y,py,dp,0)</p></li>
<li><p><strong>orbit</strong> – (Nrefs, 6) closed orbit vector at each location
specified in <em>refpts</em></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a>,
<a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_orbit4">
<span class="sig-name descname"><span class="pre">find_orbit4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="Permalink to this definition">#</a></dt>
<dd><p>Gets the 4D closed orbit for a given dp</p>
<p>Finds the closed orbit in the 4-d transverse phase space by numerically
solving for a fixed point of the one turn map M calculated with
<a class="reference internal" href="at.tracking.track.html#at.tracking.track.internal_lpass" title="at.tracking.track.internal_lpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">internal_lpass()</span></code></a>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_2\end{pmatrix}
=\mathbf{M} \cdot
\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_1\end{pmatrix}\end{split}\]</div>
<p>under the <strong>CONSTANT MOMENTUM</strong> constraint <strong>dp</strong> and with <strong>NO</strong>
constraint on the 6-th coordinate <span class="math notranslate nohighlight">\(c\tau\)</span></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a> imposes a constraint on <em>dp</em> and relaxes the
constraint on the revolution frequency. A physical storage ring does
exactly the opposite: the momentum deviation of a particle on the
closed orbit settles at the value such that the revolution is
synchronous with the RF cavity: <span class="math notranslate nohighlight">\(f_{RF} = h*f_{rev}\)</span></p>
</div>
<p>To impose this artificial constraint in <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a>,
the <code class="docutils literal notranslate"><span class="pre">PassMethod</span></code> used for any element <strong>SHOULD NOT</strong>:</p>
<ol class="arabic simple">
<li><p>Change the longitudinal momentum <em>dp</em> (cavities ,
magnets with radiation)</p></li>
<li><p>Have any time dependence (localized impedance, fast kickers etc)</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description (<a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a> must be
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>)</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation. Defaults to 0</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Path lengthening. If specified, <em>dp</em> is ignored and
the off-momentum is deduced from the path lengthening.</p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Deviation from the nominal RF frequency. If specified,
<em>dp</em> is ignored and the off-momentum is deduced from the frequency
deviation.</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a><em>]</em>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array). <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a> propagates it to
the specified <em>refpts</em>.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: False</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>guess</strong> (<em>Orbit</em>) – (6,) initial value for the
closed orbit. It may help convergence. Default: (0, 0, 0, 0, 0, 0)</p></li>
<li><p><strong>convergence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Convergence criterion.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbConvergence</span></code></a></p></li>
<li><p><strong>max_iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Maximum number of iterations.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbMaxIter</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orbit0</strong> – (6,) closed orbit vector at the entrance of the
1-st element (x,px,y,py,dp,0)</p></li>
<li><p><strong>orbit</strong> – (Nrefs, 6) closed orbit vector at each location
specified in <em>refpts</em></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_orbit6">
<span class="sig-name descname"><span class="pre">find_orbit6</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="Permalink to this definition">#</a></dt>
<dd><p>Gets the closed orbit in the full 6-D phase space</p>
<p>Finds the closed orbit in the full 6-D phase space
by numerically solving  for a fixed point of the one turn
map M calculated with <a class="reference internal" href="at.tracking.track.html#at.tracking.track.internal_lpass" title="at.tracking.track.internal_lpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">internal_lpass()</span></code></a></p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_2\end{pmatrix}
=\mathbf{M} \cdot
\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_1\end{pmatrix}\end{split}\]</div>
<p>with constraint <span class="math notranslate nohighlight">\(c\tau_2 - c\tau_1 = c.h (1/f_{RF} - 1/f_{RF_0})\)</span></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a> is a realistic simulation:</p>
<ol class="arabic simple">
<li><p>The requency in the RF cavities <span class="math notranslate nohighlight">\(f_{RF}\)</span> (may be different
from <span class="math notranslate nohighlight">\(f_{RF_0}\)</span>) imposes the synchronous condition
<span class="math notranslate nohighlight">\(c\tau_2 - c\tau_1 = c.h (1/f_{RF} - 1/f_{RF_0})\)</span>,</p></li>
<li><p>The algorithm numerically calculates the
6-by-6 Jacobian matrix J6. In order for (J-E) matrix
to be non-singular it is <strong>NECESSARY</strong> to use a realistic
<code class="docutils literal notranslate"><span class="pre">PassMethod</span></code> for cavities with non-zero momentum kick
(such as <code class="docutils literal notranslate"><span class="pre">RFCavityPass</span></code>).</p></li>
<li><p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a> can find orbits with radiation.
In order for the solution to exist the cavity must supply an
adequate energy compensation.
In the simplest case of a single cavity, it must have
<code class="docutils literal notranslate"><span class="pre">Voltage</span></code> set so that <span class="math notranslate nohighlight">\(V &gt; E_{loss}\)</span>, the energy loss
per turn</p></li>
<li><p>There is a family of solutions that correspond to different RF
buckets They differ in the 6-th coordinate by
<span class="math notranslate nohighlight">\(c*Nb/f_{RF}\)</span>,  Nb = 0:h-1</p></li>
<li><p>The value of the 6-th coordinate found at the cavity gives
the equilibrium RF phase. If there is no radiation it is 0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dp</span></code>, <code class="docutils literal notranslate"><span class="pre">dct</span></code> and <code class="docutils literal notranslate"><span class="pre">df</span></code> arguments are applied with respect
to the <strong>NOMINAL</strong> on-momentum frequency. They overwrite
exisiting frequency offsets</p></li>
</ol>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array). <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a> propagates it
to the specified <em>refpts</em>.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: False</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>guess</strong> (<em>Orbit</em>) – (6,) initial value for the
closed orbit. It may help convergence. Default: (0, 0, 0, 0, 0, 0)</p></li>
<li><p><strong>convergence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Convergence criterion.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbConvergence</span></code></a></p></li>
<li><p><strong>max_iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Maximum number of iterations.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbMaxIter</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>method</strong> (<a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><em>ELossMethod</em></a>) – Method for energy loss computation.
See <a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">ELossMethod</span></code></a>.</p></li>
<li><p><strong>cavpts</strong> (<em>Refpts</em>) – Cavity location. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, use all
cavities. This is used to compute the initial synchronous phase.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orbit0</strong> – (6,) closed orbit vector at the entrance of the
1-st element (x,px,y,py,dp,0)</p></li>
<li><p><strong>orbit</strong> – (Nrefs, 6) closed orbit vector at each location
specified in <em>refpts</em></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.find_sync_orbit">
<span class="sig-name descname"><span class="pre">find_sync_orbit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="Permalink to this definition">#</a></dt>
<dd><p>Gets the 4D closed orbit for a given dct</p>
<p>Finds the closed orbit, synchronous with the RF cavity (first 5
components of the phase space vector) by numerically solving for a fixed
point of the one turn map M calculated with <a class="reference internal" href="at.tracking.track.html#at.tracking.track.internal_lpass" title="at.tracking.track.internal_lpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">internal_lpass()</span></code></a></p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_1+
dc\tau\end{pmatrix} =\mathbf{M} \cdot
\begin{pmatrix}x \\ p_x \\ y \\ p_y \\ dp \\ c\tau_1\end{pmatrix}\end{split}\]</div>
<p>under the constraint <span class="math notranslate nohighlight">\(dc\tau = c\tau_2 - c\tau_1 = c/f_{rev} -
c/f_{rev_0}\)</span>, where <span class="math notranslate nohighlight">\(f_{rev_0} = f_{RF_0}/h\)</span> is the design revolution
frequency and <span class="math notranslate nohighlight">\(f_{rev} = (f_{RF_0} + df_{RF})/h\)</span> is the imposed
revolution frequency.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a> imposes a constraint <span class="math notranslate nohighlight">\(c\tau_2 -
c\tau_1\)</span> and <span class="math notranslate nohighlight">\(dp_2 = dp_1\)</span> but no constraint on the value of
<span class="math notranslate nohighlight">\(dp_2\)</span> or <span class="math notranslate nohighlight">\(dp_1\)</span>. The algorithm assumes time-independent
fixed-momentum ring to reduce the dimensionality of the problem.</p>
</div>
<p>To impose this artificial constraint in <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a>,
the <code class="docutils literal notranslate"><span class="pre">PassMethod</span></code> used for any element <strong>SHOULD NOT</strong>:</p>
<ol class="arabic simple">
<li><p>Change the longitudinal momentum <em>dp</em> (cavities ,
magnets with radiation)</p></li>
<li><p>Have any time dependence (localized impedance, fast kickers etc)</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description (<a class="reference internal" href="#at.lattice.lattice_object.Lattice.is_6d" title="at.lattice.lattice_object.Lattice.is_6d"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_6d</span></code></a> must be
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>)</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Path lengthening.</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Deviation from the nominal RF frequency. If specified,
<em>dct</em> is ignored and the off-momentum is deduced from the frequency
deviation.</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a><em>]</em>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array). <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_sync_orbit" title="at.lattice.lattice_object.Lattice.find_sync_orbit"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_sync_orbit()</span></code></a> propagates it
to the specified <em>refpts</em>.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: False</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>guess</strong> (<em>Orbit</em>) – (6,) initial value for the
closed orbit. It may help convergence. Default: (0, 0, 0, 0, 0, 0)</p></li>
<li><p><strong>convergence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Convergence criterion.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbConvergence</span></code></a></p></li>
<li><p><strong>max_iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Maximum number of iterations.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.OrbMaxIter</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orbit0</strong> – (6,) closed orbit vector at the entrance of the
1-st element (x,px,y,py,dp,0)</p></li>
<li><p><strong>orbit</strong> – (Nrefs, 6) closed orbit vector at each location
specified in <em>refpts</em></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit4" title="at.lattice.lattice_object.Lattice.find_orbit4"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit4()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.find_orbit6" title="at.lattice.lattice_object.Lattice.find_orbit6"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_orbit6()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_acceptance">
<span class="sig-name descname"><span class="pre">get_acceptance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">planes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitudes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">GridMode.RADIAL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_mp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">divider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_zero</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_acceptance" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the acceptance at <code class="docutils literal notranslate"><span class="pre">repfts</span></code> observation points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice definition</p></li>
<li><p><strong>planes</strong> – max. dimension 2, Plane(s) to scan for the acceptance.
Allowed values are: <code class="docutils literal notranslate"><span class="pre">'x'</span></code>, <code class="docutils literal notranslate"><span class="pre">'xp'</span></code>, <code class="docutils literal notranslate"><span class="pre">'y'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'yp'</span></code>, <code class="docutils literal notranslate"><span class="pre">'dp'</span></code>, <code class="docutils literal notranslate"><span class="pre">'ct'</span></code></p></li>
<li><p><strong>npoints</strong> – (len(planes),) array: number of points in each
dimension</p></li>
<li><p><strong>amplitudes</strong> – <p>(len(planes),) array: set the search range:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN/RADIAL</span></code></a>:
max. amplitude</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: initial step</p></li>
</ul>
</p></li>
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – Number of turns for the tracking</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points. Default: start of the machine</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – static momentum offset</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – initial orbit. Default: closed orbit</p></li>
<li><p><strong>bounds</strong> – <p>defines the tracked range: range=bounds*amplitude.
It can be use to select quadrants. For example, default values are:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: ((-1, 1), (0, 1))</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL/RECURSIVE</span></code></a>: ((0, 1),
(<span class="math notranslate nohighlight">\(\pi\)</span>, 0))</p></li>
</ul>
</p></li>
<li><p><strong>grid_mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode" title="at.acceptance.boundary.GridMode"><em>GridMode</em></a><em>]</em>) – <p>defines the evaluation grid:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: full [<span class="math notranslate nohighlight">\(\:x, y\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL</span></code></a>: full [<span class="math notranslate nohighlight">\(\:r, \theta\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: radial recursive search</p></li>
</ul>
</p></li>
<li><p><strong>use_mp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Use python multiprocessing (<a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.patpass" title="at.tracking.deprecated.patpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">patpass()</span></code></a>,
default use <a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.lattice_pass" title="at.tracking.deprecated.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a>).</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Print out some information</p></li>
<li><p><strong>divider</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – Value of the divider used in
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> boundary search</p></li>
<li><p><strong>shift_zero</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Epsilon offset applied on all 6 coordinates</p></li>
<li><p><strong>start_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – Python multiprocessing start method. The default
<code class="docutils literal notranslate"><span class="pre">None</span></code> uses the python default that is considered safe.
Available parameters: <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>, <code class="docutils literal notranslate"><span class="pre">'forkserver'</span></code>.
The default for linux is <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, the default for MacOS and
Windows is <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>. <code class="docutils literal notranslate"><span class="pre">'fork'</span></code> may used for MacOS to speed-up
the calculation or to solve runtime errors, however  it is
considered unsafe.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>boundary</strong> – (2,n) array: 2D acceptance</p></li>
<li><p><strong>survived</strong> – (2,n) array: Coordinates of surviving particles</p></li>
<li><p><strong>tracked</strong> – (2,n) array: Coordinates of tracked particles</p></li>
</ul>
</dd>
</dl>
<p>In case of multiple refpts, return values are lists of arrays, with one
array per ref. point.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bf</span><span class="p">,</span><span class="n">sf</span><span class="p">,</span><span class="n">gf</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">get_acceptance</span><span class="p">(</span><span class="n">planes</span><span class="p">,</span> <span class="n">npoints</span><span class="p">,</span> <span class="n">amplitudes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">gf</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">sf</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">bf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When``use_mp=True`` all the available CPUs will be used.
This behavior can be changed by setting
<code class="docutils literal notranslate"><span class="pre">at.DConstant.patpass_poolsize</span></code> to the desired value</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_beam_current">
<span class="sig-name descname"><span class="pre">get_beam_current</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.get_beam_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_beam_current" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_bool_index">
<span class="sig-name descname"><span class="pre">get_bool_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_bool_index" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a bool array of element indices, selecting ring elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, allow <em>len(ring)</em> as a
special index, referring to the end of the last element.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bool_refs</strong> (<em>BoolRefpts</em>) – A bool numpy array used for indexing
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s in a lattice.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">Quadrupole</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Quadrupole" title="at.lattice.elements.Quadrupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Quadrupole</span></code></a>
are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="s2">&quot;Q[FD]*&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements whose <em>FamName</em>
matches “Q[FD]*” are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">checkattr</span><span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements whose <em>K</em>
attribute is 0.0 are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_bool_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of <em>len(ring)+1</em> <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_bunch_length_espread">
<span class="sig-name descname"><span class="pre">get_bunch_length_espread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_curr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">espread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_bunch_length_espread" title="Permalink to this definition">#</a></dt>
<dd><p>Haissinski equation solver</p>
<p>Solves the Haissinski formula and returns the bunch length and energy
spread for given bunch current and <span class="math notranslate nohighlight">\(Z/n\)</span>. If both <code class="docutils literal notranslate"><span class="pre">zn</span></code> and
<code class="docutils literal notranslate"><span class="pre">bunch_curr</span></code> are <code class="docutils literal notranslate"><span class="pre">None</span></code>, zero current case, otherwise both are needed
for the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> – ring use for tracking</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>zn=None</strong> – <span class="math notranslate nohighlight">\(Z/n\)</span> for the full ring</p></li>
<li><p><strong>bunch_curr=None</strong> – Bunch current</p></li>
<li><p><strong>espread=None</strong> – Energy spread, if <code class="docutils literal notranslate"><span class="pre">None</span></code> use lattice parameter</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Bunch length, energy spread</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_cells">
<span class="sig-name descname"><span class="pre">get_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filtfunc</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BoolRefpts</span></span></span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_cells" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element_type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BoolRefpts</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrname</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BoolRefpts</span></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrvalue</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BoolRefpts</span></span></span></dt>
<dd><p>Returns a bool array of element indices, selecting ring elements.</p>
<p>Deprecated: <code class="code highlight pycode python docutils literal highlight-python"><span class="n">get_cells</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">refpts</span><span class="p">)</span></code> is
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="o">.</span><span class="n">bool_refpts</span><span class="p">(</span><span class="n">refpts</span><span class="p">)</span></code> except for <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> arguments:
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">get_cells</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">attrname</span> <span class="p">[,</span> <span class="n">attrvalue</span><span class="p">])</span></code> is
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="o">.</span><span class="n">bool_refpts</span><span class="p">(</span><span class="n">checkattr</span><span class="p">(</span><span class="n">strkey</span> <span class="p">[,</span> <span class="n">attrvalue</span><span class="p">]))</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>filtfunc</strong> (<em>ElementFilter</em>) – Filter function. Selects
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s satisfying the filter function</p></li>
<li><p><strong>element_type</strong> (<em>Type</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Element type</p></li>
<li><p><strong>attrname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Attribute name</p></li>
<li><p><strong>attrvalue</strong> (<em>Any</em>) – Attribute value. If absent, select the
presence of an <em>attrname</em> attribute. If present, select
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s with <code class="code highlight pycode python docutils literal highlight-python"><span class="n">attrname</span> <span class="o">==</span> <span class="n">attrvalue</span></code>.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bool_refs</strong> (<em>BoolRefpts</em>) – numpy Array of <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a> with length
len(ring)+1</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_cells</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements having a
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">Frequency</span></code> attribute are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">get_cells</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a numpy array of booleans where all elements having a
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">K</span></code> attribute equal to 0.0 are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.bool_refpts" title="at.lattice.lattice_object.Lattice.bool_refpts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Lattice.bool_refpts()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.uint32_refpts" title="at.lattice.lattice_object.Lattice.uint32_refpts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Lattice.uint32_refpts()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_chrom">
<span class="sig-name descname"><span class="pre">get_chrom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linopt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cavpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_chrom" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the chromaticities using several available methods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – <p><code class="docutils literal notranslate"><span class="pre">'linopt'</span></code> returns the tunes from the
<a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt6" title="at.lattice.lattice_object.Lattice.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a> function,</p>
<p><code class="docutils literal notranslate"><span class="pre">'fft'</span></code> tracks a single particle and computes the tunes with
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.fft.html#scipy.fftpack.fft" title="(in SciPy v1.11.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">fft()</span></code></a>,</p>
<p><code class="docutils literal notranslate"><span class="pre">'interp_fft'</span></code> tracks a single particle and computes the tunes with
interpolated FFT.</p>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation.</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening.</p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency.</p></li>
<li><p><strong>cavpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, look for ring.cavpts, or
otherwise take all cavities.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step for differentiation
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p>
</dd>
</dl>
<p>for the <code class="docutils literal notranslate"><span class="pre">'fft'</span></code> and <code class="docutils literal notranslate"><span class="pre">'interp_fft'</span></code> methods only:</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of turns. Default: 512</p></li>
<li><p><strong>amplitude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Amplitude of oscillation.
Default: 1.E-6</p></li>
<li><p><strong>remove_dc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Remove the mean of oscillation data.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
<li><p><strong>num_harmonics</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of harmonic components to
compute (before mask applied, default: 20)</p></li>
<li><p><strong>fmin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Lower tune bound. Default: 0</p></li>
<li><p><strong>fmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Upper tune bound. Default: 1</p></li>
<li><p><strong>hann</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Turn on Hanning window.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, Work only for <code class="docutils literal notranslate"><span class="pre">'fft'</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>chromaticities</strong> (<em>ndarray</em>) – array([<span class="math notranslate nohighlight">\(\xi_x,\xi_y\)</span>])</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_elements">
<span class="sig-name descname"><span class="pre">get_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_elements" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a list of elements selected by <em>key</em>.</p>
<p>Deprecated: <code class="code highlight pycode python docutils literal highlight-python"><span class="n">get_elements</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">refpts</span><span class="p">)</span></code> is <code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="p">[</span><span class="n">refpts</span><span class="p">]</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>elem_list</strong> (<em>list</em>) – list of <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s matching key</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_energy_loss">
<span class="sig-name descname"><span class="pre">get_energy_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ELossMethod.INTEGRAL</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_energy_loss" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the energy loss per turn</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><em>ELossMethod</em></a><em>]</em>) – Method for energy loss computation.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">ELossMethod</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>eloss</strong> (<em>float</em>) – Energy loss per turn [eV]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_geometry">
<span class="sig-name descname"><span class="pre">get_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_coordinates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_geometry" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the 2D ring geometry in cartesian coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>start_coordinates</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – x ,y, angle at starting point</p></li>
<li><p><strong>centered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> the coordinates origin is the
center of the ring</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>geomdata</strong> – recarray containing, x, y, angle</p></li>
<li><p><strong>radius</strong> – machine radius</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">geomdata</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">get_geometry</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_horizontal_acceptance">
<span class="sig-name descname"><span class="pre">get_horizontal_acceptance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_horizontal_acceptance" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the 1D horizontal acceptance at <code class="docutils literal notranslate"><span class="pre">refpts</span></code> observation points</p>
<p>See <a class="reference internal" href="#at.lattice.lattice_object.Lattice.get_acceptance" title="at.lattice.lattice_object.Lattice.get_acceptance"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_acceptance()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice definition</p></li>
<li><p><strong>resolution</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Minimum distance between 2 grid points</p></li>
<li><p><strong>amplitude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – <p>Search range:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN/RADIAL</span></code></a>:
max. amplitude</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: initial step</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nturns</strong> – Number of turns for the tracking</p></li>
<li><p><strong>refpts</strong> – Observation points. Default: start of the machine</p></li>
<li><p><strong>dp</strong> – static momentum offset</p></li>
<li><p><strong>offset</strong> – initial orbit. Default: closed orbit</p></li>
<li><p><strong>grid_mode</strong> – <p>defines the evaluation grid:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: full [<span class="math notranslate nohighlight">\(\:x, y\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL</span></code></a>: full [<span class="math notranslate nohighlight">\(\:r, \theta\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: radial recursive search</p></li>
</ul>
</p></li>
<li><p><strong>use_mp</strong> – Use python multiprocessing (<a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.patpass" title="at.tracking.deprecated.patpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">patpass()</span></code></a>,
default use <a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.lattice_pass" title="at.tracking.deprecated.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a>). In case multi-processing
is not enabled, <code class="docutils literal notranslate"><span class="pre">grid_mode</span></code> is forced to
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> (most efficient in single core)</p></li>
<li><p><strong>verbose</strong> – Print out some information</p></li>
<li><p><strong>divider</strong> – Value of the divider used in
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> boundary search</p></li>
<li><p><strong>shift_zero</strong> – Epsilon offset applied on all 6 coordinates</p></li>
<li><p><strong>start_method</strong> – Python multiprocessing start method. The default
<code class="docutils literal notranslate"><span class="pre">None</span></code> uses the python default that is considered safe.
Available parameters: <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>, <code class="docutils literal notranslate"><span class="pre">'forkserver'</span></code>.
The default for linux is <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, the default for MacOS and
Windows is <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>. <code class="docutils literal notranslate"><span class="pre">'fork'</span></code> may used for MacOS to speed-up
the calculation or to solve runtime errors, however  it is considered
unsafe.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boundary</strong> – (len(refpts),2) array: 1D acceptance</p></li>
<li><p><strong>tracked</strong> – (n,) array: Coordinates of tracked particles</p></li>
<li><p><strong>survived</strong> – (n,) array: Coordinates of surviving particles</p></li>
</ul>
</dd>
</dl>
<p>In case of multiple <code class="docutils literal notranslate"><span class="pre">tracked</span></code> and <code class="docutils literal notranslate"><span class="pre">survived</span></code> are lists of arrays,
with one array per ref. point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When``use_mp=True`` all the available CPUs will be used.
This behavior can be changed by setting
<code class="docutils literal notranslate"><span class="pre">at.DConstant.patpass_poolsize</span></code> to the desired value</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_lifetime">
<span class="sig-name descname"><span class="pre">get_lifetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">emity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_curr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emitx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">momap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_lifetime" title="Permalink to this definition">#</a></dt>
<dd><p>Touschek lifetime calculation</p>
<p>Computes the touschek lifetime using the Piwinski formula</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – ring use for tracking</p></li>
<li><p><strong>emity</strong> – verticla emittance</p></li>
<li><p><strong>bunch_curr</strong> – bunch current</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>emitx=None</strong> – horizontal emittance</p></li>
<li><p><strong>sigs=None</strong> – rms bunch length</p></li>
<li><p><strong>sigp=None</strong> – energy spread</p></li>
<li><p><strong>zn=None</strong> – full ring <span class="math notranslate nohighlight">\(Z/n\)</span></p></li>
<li><p><strong>momap=None</strong> – momentum aperture, has to be consistent with <code class="docutils literal notranslate"><span class="pre">refpts</span></code>
if provided the momentum aperture is not calculated</p></li>
<li><p><strong>refpts=None</strong> – <code class="docutils literal notranslate"><span class="pre">refpts</span></code> where the momentum aperture is calculated,
the default is to compute it for all elements in the
ring, <code class="docutils literal notranslate"><span class="pre">len(refpts)&gt;2</span></code> is required</p></li>
<li><p><strong>resolution</strong> – minimum distance between 2 grid points, default=1.0e-3</p></li>
<li><p><strong>amplitude</strong> – max. amplitude for <code class="docutils literal notranslate"><span class="pre">RADIAL</span></code> and <code class="docutils literal notranslate"><span class="pre">CARTESIAN</span></code> or
initial step in <code class="docutils literal notranslate"><span class="pre">RECURSIVE</span></code>
default = 0.1</p></li>
<li><p><strong>nturns=1024</strong> – Number of turns for the tracking</p></li>
<li><p><strong>dp=None</strong> – static momentum offset</p></li>
<li><p><strong>offset</strong> – initial orbit. Default: closed orbit</p></li>
<li><p><strong>grid_mode</strong> – <code class="docutils literal notranslate"><span class="pre">at.GridMode.CARTESIAN/RADIAL</span></code> track full vector
(default). <code class="docutils literal notranslate"><span class="pre">at.GridMode.RECURSIVE</span></code>: recursive search</p></li>
<li><p><strong>use_mp=False</strong> – Use python multiprocessing (<code class="docutils literal notranslate"><span class="pre">patpass</span></code>, default use
<code class="docutils literal notranslate"><span class="pre">lattice_pass</span></code>). In case multi-processing is not
enabled <code class="docutils literal notranslate"><span class="pre">GridMode</span></code> is forced to
<code class="docutils literal notranslate"><span class="pre">RECURSIVE</span></code> (most efficient in single core)</p></li>
<li><p><strong>verbose=False</strong> – Print out some inform</p></li>
<li><p><strong>epsrel</strong> (<em>epsabs</em><em>,</em>) – integral absolute and relative tolerances</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tl</strong> – touschek lifetime, double expressed in seconds</p></li>
<li><p><strong>ma</strong> – momentum aperture (len(refpts), 2) array</p></li>
<li><p><strong>refpts</strong> – refpts used for momentum aperture calculation
(len(refpts), ) array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_mcf">
<span class="sig-name descname"><span class="pre">get_mcf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_mcf" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the momentum compaction factor <span class="math notranslate nohighlight">\(\alpha\)</span></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description (<code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="o">.</span><span class="n">is_6d</span></code> must be
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>)</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>DPStep</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mcf</strong> (<em>float</em>) – Momentum compaction factor <span class="math notranslate nohighlight">\(\alpha\)</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_momentum_acceptance">
<span class="sig-name descname"><span class="pre">get_momentum_acceptance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_momentum_acceptance" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the 1D momentum acceptance at refpts observation points</p>
<p>See <a class="reference internal" href="#at.lattice.lattice_object.Lattice.get_acceptance" title="at.lattice.lattice_object.Lattice.get_acceptance"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_acceptance()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice definition</p></li>
<li><p><strong>resolution</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Minimum distance between 2 grid points</p></li>
<li><p><strong>amplitude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – <p>Search range:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN/RADIAL</span></code></a>:
max. amplitude</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: initial step</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nturns</strong> – Number of turns for the tracking</p></li>
<li><p><strong>refpts</strong> – Observation points. Default: start of the machine</p></li>
<li><p><strong>dp</strong> – static momentum offset</p></li>
<li><p><strong>offset</strong> – initial orbit. Default: closed orbit</p></li>
<li><p><strong>grid_mode</strong> – <p>defines the evaluation grid:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: full [<span class="math notranslate nohighlight">\(\:x, y\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL</span></code></a>: full [<span class="math notranslate nohighlight">\(\:r, \theta\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: radial recursive search</p></li>
</ul>
</p></li>
<li><p><strong>use_mp</strong> – Use python multiprocessing (<a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.patpass" title="at.tracking.deprecated.patpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">patpass()</span></code></a>,
default use <a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.lattice_pass" title="at.tracking.deprecated.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a>). In case multi-processing is
not enabled, <code class="docutils literal notranslate"><span class="pre">grid_mode</span></code> is forced to
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> (most efficient in single core)</p></li>
<li><p><strong>verbose</strong> – Print out some information</p></li>
<li><p><strong>divider</strong> – Value of the divider used in
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> boundary search</p></li>
<li><p><strong>shift_zero</strong> – Epsilon offset applied on all 6 coordinates</p></li>
<li><p><strong>start_method</strong> – Python multiprocessing start method. The default
<code class="docutils literal notranslate"><span class="pre">None</span></code> uses the python default that is considered safe.
Available parameters: <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>, <code class="docutils literal notranslate"><span class="pre">'forkserver'</span></code>.
The default for linux is <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, the default for MacOS and
Windows is <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>. <code class="docutils literal notranslate"><span class="pre">'fork'</span></code> may used for MacOS to speed-up
the calculation or to solve runtime errors, however  it is considered
unsafe.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boundary</strong> – (len(refpts),2) array: 1D acceptance</p></li>
<li><p><strong>tracked</strong> – (n,) array: Coordinates of tracked particles</p></li>
<li><p><strong>survived</strong> – (n,) array: Coordinates of surviving particles</p></li>
</ul>
</dd>
</dl>
<p>In case of multiple <code class="docutils literal notranslate"><span class="pre">tracked</span></code> and <code class="docutils literal notranslate"><span class="pre">survived</span></code> are lists of arrays,
with one array per ref. point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When``use_mp=True`` all the available CPUs will be used.
This behavior can be changed by setting
<code class="docutils literal notranslate"><span class="pre">at.DConstant.patpass_poolsize</span></code> to the desired value</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_optics">
<span class="sig-name descname"><span class="pre">get_optics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method=&lt;function</span> <span class="pre">linopt6&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_optics" title="Permalink to this definition">#</a></dt>
<dd><p>Linear analysis of a fully coupled lattice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – <p>Elements at which data is returned.
It can be:</p>
<ol class="arabic simple">
<li><p>an integer in the range [-len(ring), len(ring)-1]
selecting the element according to python indexing rules.
As a special case, len(ring) is allowed and refers to the end
of the last element,</p></li>
<li><p>an ordered list of such integers without duplicates,</p></li>
<li><p>a numpy array of booleans of maximum length len(ring)+1,
where selected elements are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
</ol>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation.</p></li>
<li><p><strong>method</strong> (<em>Callable</em>) – <p>Method for linear optics:</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt2" title="at.physics.linear.linopt2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt2</span></code></a>: no longitudinal motion, no H/V coupling,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt4" title="at.physics.linear.linopt4"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt4</span></code></a>: no longitudinal motion, Sagan/Rubin
4D-analysis of coupled motion,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt6</span></code></a> (default): with or without longitudinal
motion, normal mode analysis</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>get_chrom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Compute chromaticities. Needs computing
the tune at 2 different momentum deviations around the central one.</p></li>
<li><p><strong>get_w</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Computes chromatic amplitude functions
(W) <a class="footnote-reference brackets" href="#id6" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. Needs to compute the optics at 2 different momentum
deviations around the central one.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – <p>Initial conditions for transfer line optics.
Record array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or dictionary. Keys:</p>
<dl class="simple">
<dt>R or alpha, beta</dt><dd><p>mandatory (2,) arrays</p>
</dd>
<dt>closed_orbit</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
<dt>dispersion</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
</dl>
<p>If present, the attribute <strong>R</strong> will be used, otherwise the
attributes <strong>alpha</strong> and <strong>beta</strong> will be used. All other attributes
are ignored.</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elemdata0</strong> – Linear optics data at the entrance of the ring</p></li>
<li><p><strong>ringdata</strong> – Lattice properties</p></li>
<li><p><strong>elemdata</strong> – Linear optics at the points refered to by <em>refpts</em>,
if refpts is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> an empty lindata structure is returned.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The format of output record arrays depends on the selected method.
See <a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt2" title="at.lattice.lattice_object.Lattice.linopt2"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt2()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt4" title="at.lattice.lattice_object.Lattice.linopt4"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt4()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt6" title="at.lattice.lattice_object.Lattice.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_radiation_integrals">
<span class="sig-name descname"><span class="pre">get_radiation_integrals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twiss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_radiation_integrals" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the 5 radiation integrals for uncoupled lattices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – Lattice description</p></li>
<li><p><strong>twiss</strong> – Linear optics at all points (from <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>).
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will be computed.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to</p></li>
<li><p><strong>method</strong> (<em>Callable</em>) – <p>Method for linear optics:</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt2" title="at.physics.linear.linopt2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt2</span></code></a>: no longitudinal motion, no H/V coupling,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt6</span></code></a> (default): with or without longitudinal
motion, normal mode analysis</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i1</strong> (<em>float</em>) – Radiation integrals - <span class="math notranslate nohighlight">\(I_1 \quad [m]\)</span></p></li>
<li><p><strong>i2</strong> (<em>float</em>) – <span class="math notranslate nohighlight">\(I_2 \quad [m^{-1}]\)</span></p></li>
<li><p><strong>i3</strong> (<em>float</em>) – <span class="math notranslate nohighlight">\(I_3 \quad [m^{-2}]\)</span></p></li>
<li><p><strong>i4</strong> (<em>float</em>) – <span class="math notranslate nohighlight">\(I_4 \quad [m^{-1}]\)</span></p></li>
<li><p><strong>i5</strong> (<em>float</em>) – <span class="math notranslate nohighlight">\(I_5 \quad [m^{-1}]\)</span></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_refpts">
<span class="sig-name descname"><span class="pre">get_refpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_refpts" title="Permalink to this definition">#</a></dt>
<dd><p>Return a <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.uint32" title="(in NumPy v1.26)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">uint32</span></code></a> array of element indices selecting
ring elements.</p>
<p>Deprecated: <code class="code highlight pycode python docutils literal highlight-python"><span class="n">get_elements</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">refpts</span><span class="p">)</span></code> is
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="o">.</span><span class="n">uint32_refpts</span><span class="p">(</span><span class="n">refpts</span><span class="p">)</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>uint32_refs</strong> (<em>Uint32Refs</em>) – <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.uint32" title="(in NumPy v1.26)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">uint32</span></code></a> numpy array as
long as the number of refpts</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.uint32_refpts" title="at.lattice.lattice_object.Lattice.uint32_refpts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Lattice.uint32_refpts()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.bool_refpts" title="at.lattice.lattice_object.Lattice.bool_refpts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Lattice.bool_refpts()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_revolution_frequency">
<span class="sig-name descname"><span class="pre">get_revolution_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_revolution_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the revolution frequency of the full ring [Hz]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Deviation of RF frequency. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>frev</strong> – Revolution frequency [Hz]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_rf_frequency">
<span class="sig-name descname"><span class="pre">get_rf_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_rf_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Return the RF frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts=None</strong> – Cavity location. If None, look for ring.cavpts,
otherwise take all cavities.</p></li>
<li><p><strong>array=False</strong> – <p>If False, return the frequency of the selected cavities
with the lowest frequency.</p>
<p>If True, return the frequency of all selected cavities</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rf_freq</strong> – RF frequency</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_rf_timelag">
<span class="sig-name descname"><span class="pre">get_rf_timelag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_rf_timelag" title="Permalink to this definition">#</a></dt>
<dd><p>Return the RF time lag</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts=None</strong> – Cavity location. If None, look for ring.cavpts,
otherwise take all cavities.</p></li>
<li><p><strong>array=False</strong> – <p>If False, return the frequency of the selected cavities
with the lowest frequency.</p>
<p>If True, return the frequency of all selected cavities</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rf_timelag</strong> – RF time lag</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_rf_voltage">
<span class="sig-name descname"><span class="pre">get_rf_voltage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_rf_voltage" title="Permalink to this definition">#</a></dt>
<dd><p>Return the total RF voltage (full ring)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts=None</strong> – Cavity location. If None, look for ring.cavpts,
otherwise take all cavities.</p></li>
<li><p><strong>array=False</strong> – <p>If False, return the frequency of the selected cavities
with the lowest frequency.</p>
<p>If True, return the frequency of all selected cavities</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rf_v</strong> – Total RF voltage (full ring)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_s_pos">
<span class="sig-name descname"><span class="pre">get_s_pos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">RefptsCode.All</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_s_pos" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the locations of selected elements</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>s_pos</strong> – Array of locations of the elements selected by <em>refpts</em></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_s_pos</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">End</span><span class="p">)</span>
<span class="go">array([26.37428795])</span>
</pre></div>
</div>
<p>Position at the end of the last element: length of the lattice</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_scattering_rate">
<span class="sig-name descname"><span class="pre">get_scattering_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">emity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bunch_curr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emitx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">momap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_scattering_rate" title="Permalink to this definition">#</a></dt>
<dd><p>Touschek scattering rate calculation</p>
<p>Computes the touschek scattering using the Piwinski formula</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – ring use for tracking</p></li>
<li><p><strong>emity</strong> – verticla emittance</p></li>
<li><p><strong>bunch_curr</strong> – bunch current</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>emitx=None</strong> – horizontal emittance</p></li>
<li><p><strong>sigs=None</strong> – rms bunch length</p></li>
<li><p><strong>sigp=None</strong> – energy spread</p></li>
<li><p><strong>zn=None</strong> – full ring <span class="math notranslate nohighlight">\(Z/n\)</span></p></li>
<li><p><strong>momap=None</strong> – momentum aperture, has to be consistent with <code class="docutils literal notranslate"><span class="pre">refpts</span></code>
if provided the momentum aperture is not calculated</p></li>
<li><p><strong>refpts=None</strong> – <code class="docutils literal notranslate"><span class="pre">refpts</span></code> where the momentum aperture is calculated,
the default is to compute it for all elements in the
ring, <code class="docutils literal notranslate"><span class="pre">len(refpts)&gt;2</span></code> is required</p></li>
<li><p><strong>resolution</strong> – minimum distance between 2 grid points, default=1.0e-3</p></li>
<li><p><strong>amplitude</strong> – max. amplitude for <code class="docutils literal notranslate"><span class="pre">RADIAL</span></code> and <code class="docutils literal notranslate"><span class="pre">CARTESIAN</span></code> or
initial step in <code class="docutils literal notranslate"><span class="pre">RECURSIVE</span></code>
default = 0.1</p></li>
<li><p><strong>nturns=1024</strong> – Number of turns for the tracking</p></li>
<li><p><strong>dp=None</strong> – static momentum offset</p></li>
<li><p><strong>grid_mode</strong> – <code class="docutils literal notranslate"><span class="pre">at.GridMode.CARTESIAN/RADIAL</span></code> track full vector
(default). <code class="docutils literal notranslate"><span class="pre">at.GridMode.RECURSIVE</span></code>: recursive search</p></li>
<li><p><strong>use_mp=False</strong> – Use python multiprocessing (<code class="docutils literal notranslate"><span class="pre">patpass</span></code>, default use
<code class="docutils literal notranslate"><span class="pre">lattice_pass</span></code>). In case multi-processing is not
enabled <code class="docutils literal notranslate"><span class="pre">GridMode</span></code> is forced to
<code class="docutils literal notranslate"><span class="pre">RECURSIVE</span></code> (most efficient in single core)</p></li>
<li><p><strong>verbose=False</strong> – Print out some inform</p></li>
<li><p><strong>epsrel</strong> (<em>epsabs</em><em>,</em>) – integral absolute and relative tolerances</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scattering_rate</strong> – scattering rate double array (len(refpts), )
expressed in event/seconds</p></li>
<li><p><strong>ma</strong> – momentum aperture (len(refpts), 2) array</p></li>
<li><p><strong>refpts</strong> – refpts used for momentum aperture calculation
(len(refpts), ) array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_slip_factor">
<span class="sig-name descname"><span class="pre">get_slip_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_slip_factor" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the slip factor <span class="math notranslate nohighlight">\(\eta\)</span></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description (<code class="code highlight pycode python docutils literal highlight-python"><span class="n">ring</span><span class="o">.</span><span class="n">is_6d</span></code> must be
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>)</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation</p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eta</strong> (<em>float</em>) – Slip factor <span class="math notranslate nohighlight">\(\eta\)</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_tune">
<span class="sig-name descname"><span class="pre">get_tune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linopt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_tune" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the tunes using several available methods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – <p><code class="docutils literal notranslate"><span class="pre">'linopt'</span></code> returns the tunes from the
<a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a> function,</p>
<p><code class="docutils literal notranslate"><span class="pre">'fft'</span></code> tracks a single particle and computes the tunes with fft,</p>
<p><code class="docutils literal notranslate"><span class="pre">'interp_fft'</span></code> tracks a single particle and computes the tunes with
interpolated FFT.</p>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation.</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening.</p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency.</p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
</ul>
</dd>
</dl>
<p>for the <code class="docutils literal notranslate"><span class="pre">'fft'</span></code> and <code class="docutils literal notranslate"><span class="pre">'interp_fft'</span></code> methods only:</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of turns. Default: 512</p></li>
<li><p><strong>amplitude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Amplitude of oscillation.
Default: 1.E-6</p></li>
<li><p><strong>remove_dc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Remove the mean of oscillation data.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
<li><p><strong>num_harmonics</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of harmonic components to
compute (before mask applied, default: 20)</p></li>
<li><p><strong>fmin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Lower tune bound. Default: 0</p></li>
<li><p><strong>fmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Upper tune bound. Default: 1</p></li>
<li><p><strong>hann</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Turn on Hanning window.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. Work only for <code class="docutils literal notranslate"><span class="pre">'fft'</span></code></p></li>
<li><p><strong>get_integer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Turn on integer tune (slower)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>tunes</strong> (<em>ndarray</em>) – array([<span class="math notranslate nohighlight">\(\nu_x,\nu_y\)</span>])</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_uint32_index">
<span class="sig-name descname"><span class="pre">get_uint32_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_uint32_index" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an integer array of element indices, selecting ring elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, allow <em>len(ring)</em> as a
special index, referring to the end of the last element.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>uint32_ref</strong> (<em>Uint32Refpts</em>) – uint32 numpy array used for indexing
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s in a lattice.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">Sextupole</span><span class="p">)</span>
<span class="go">array([ 21,  27,  35,  89,  97, 103], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array of indices of all <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Sextupole" title="at.lattice.elements.Sextupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sextupole</span></code></a>s</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">End</span><span class="p">)</span>
<span class="go">array([121], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array([<code class="code highlight pycode python docutils literal highlight-python"><span class="nb">len</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span></code>])</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">checkattr</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">))</span>
<span class="go">array([0], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array of indices of all elements having a ‘Frequency’
attribute</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_value_refpts">
<span class="sig-name descname"><span class="pre">get_value_refpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_value_refpts" title="Permalink to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Extracts attribute values from selected</dt><dd><p>lattice <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>attrname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Attribute name</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – index of the value to retrieve if <em>attrname</em> is
an array.</p></li>
<li><p><strong>regex</strong> – <dl class="simple">
<dt>Use regular expression for refpts string matching;</dt><dd><p>Default: False (Unix shell-style wildcards)</p>
</dd>
</dl>
<p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> the full array is retrieved</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>attrvalues</strong> – numpy Array of attribute values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.get_vertical_acceptance">
<span class="sig-name descname"><span class="pre">get_vertical_acceptance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.get_vertical_acceptance" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the 1D vertical acceptance at refpts observation points</p>
<p>See <a class="reference internal" href="#at.lattice.lattice_object.Lattice.get_acceptance" title="at.lattice.lattice_object.Lattice.get_acceptance"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_acceptance()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice definition</p></li>
<li><p><strong>resolution</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Minimum distance between 2 grid points</p></li>
<li><p><strong>amplitude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – <p>Search range:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN/RADIAL</span></code></a>:
max. amplitude</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: initial step</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nturns</strong> – Number of turns for the tracking</p></li>
<li><p><strong>refpts</strong> – Observation points. Default: start of the machine</p></li>
<li><p><strong>dp</strong> – static momentum offset</p></li>
<li><p><strong>offset</strong> – initial orbit. Default: closed orbit</p></li>
<li><p><strong>grid_mode</strong> – <p>defines the evaluation grid:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: full [<span class="math notranslate nohighlight">\(\:x, y\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL</span></code></a>: full [<span class="math notranslate nohighlight">\(\:r, \theta\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: radial recursive search</p></li>
</ul>
</p></li>
<li><p><strong>use_mp</strong> – Use python multiprocessing (<a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.patpass" title="at.tracking.deprecated.patpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">patpass()</span></code></a>,
default use <a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.lattice_pass" title="at.tracking.deprecated.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a>). In case multi-processing
is not enabled, <code class="docutils literal notranslate"><span class="pre">grid_mode</span></code> is forced to
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> (most efficient in single core)</p></li>
<li><p><strong>verbose</strong> – Print out some information</p></li>
<li><p><strong>divider</strong> – Value of the divider used in
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> boundary search</p></li>
<li><p><strong>shift_zero</strong> – Epsilon offset applied on all 6 coordinates</p></li>
<li><p><strong>start_method</strong> – Python multiprocessing start method. The default
<code class="docutils literal notranslate"><span class="pre">None</span></code> uses the python default that is considered safe.
Available parameters: <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>, <code class="docutils literal notranslate"><span class="pre">'forkserver'</span></code>.
The default for linux is <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, the default for MacOS and
Windows is <code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>. <code class="docutils literal notranslate"><span class="pre">'fork'</span></code> may used for MacOS to speed-up
the calculation or to solve runtime errors, however  it is considered
unsafe.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boundary</strong> – (len(refpts),2) array: 1D acceptance</p></li>
<li><p><strong>tracked</strong> – (n,) array: Coordinates of tracked particles</p></li>
<li><p><strong>survived</strong> – (n,) array: Coordinates of surviving particles</p></li>
</ul>
</dd>
</dl>
<p>In case of multiple <code class="docutils literal notranslate"><span class="pre">tracked</span></code> and <code class="docutils literal notranslate"><span class="pre">survived</span></code> are lists of arrays,
with one array per ref. point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When``use_mp=True`` all the available CPUs will be used.
This behavior can be changed by setting
<code class="docutils literal notranslate"><span class="pre">at.DConstant.patpass_poolsize</span></code> to the desired value</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.insert" title="Permalink to this definition">#</a></dt>
<dd><p>This method allow to insert an AT element in the lattice.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> (<em>SupportsIndex</em>) – index at which the lement is inserted</p></li>
<li><p><strong>elem</strong> (<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a>) – AT element to be inserted in the lattice</p></li>
<li><p><strong>copy_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> a deep copy of elem
is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.lattice_pass">
<span class="sig-name descname"><span class="pre">lattice_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">RefptsCode.End</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.lattice_pass" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.lattice_pass" title="at.lattice.lattice_object.Lattice.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a> tracks particles through each element of a lattice
calling the element-specific tracking function specified in the Element’s
<em>PassMethod</em> field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – list of elements</p></li>
<li><p><strong>r_in</strong> – (6, N) array: input coordinates of N particles.
<em>r_in</em> is modified in-place and reports the coordinates at
the end of the element. For the best efficiency, <em>r_in</em>
should be given as F_CONTIGUOUS numpy array.</p></li>
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – number of turns to be tracked</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Selects the location of coordinates output.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Use elements persisted from a previous
call. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, assume that the lattice has not changed
since the previous call.</p></li>
<li><p><strong>keep_counter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Keep the turn number from the previous
call.</p></li>
<li><p><strong>turn</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Starting turn number. Ignored if
<em>keep_counter</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. The turn number is necessary to
compute the absolute path length used in RFCavityPass.</p></li>
<li><p><strong>losses</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Boolean to activate loss maps output</p></li>
<li><p><strong>omp_num_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of OpenMP threads
(default: automatic)</p></li>
</ul>
</dd>
</dl>
<p>The following keyword arguments overload the Lattice values</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particle</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="at.lattice.particle_object.html#at.lattice.particle_object.Particle" title="at.lattice.particle_object.Particle"><em>Particle</em></a><em>]</em>) – circulating particle.
Default: <code class="code docutils literal notranslate"><span class="pre">lattice.particle</span></code> if existing,
otherwise <code class="code docutils literal notranslate"><span class="pre">Particle('relativistic')</span></code></p></li>
<li><p><strong>energy</strong> (<em>Optiona</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – lattice energy. Default 0.</p></li>
<li><p><strong>unfold_beam</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Internal beam folding activate, this
assumes the input particles are in bucket 0, works only
if all bucket see the same RF Voltage.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
</ul>
</dd>
</dl>
<p>If <em>energy</em> is not available, relativistic tracking if forced,
<em>rest_energy</em> is ignored.</p>
<dl class="field-list">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>r_out</strong> – (6, N, R, T) array containing output coordinates of N particles
at R reference points for T turns.</p></li>
<li><p><strong>loss_map</strong> – If <em>losses</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: dictionary with the
following key:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>islost</strong></p></td>
<td><p>(npart,) bool array indicating lost particles</p></td>
</tr>
<tr class="row-even"><td><p><strong>turn</strong></p></td>
<td><p>(npart,) int array indicating the turn at
which the particle is lost</p></td>
</tr>
<tr class="row-odd"><td><p><strong>element</strong></p></td>
<td><p>((npart,) int array indicating the element at
which the particle is lost</p></td>
</tr>
<tr class="row-even"><td><p><strong>coord</strong></p></td>
<td><p>(6, npart) float array giving the coordinates at
which the particle is lost (zero for surviving
particles)</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="code highlight pycode python docutils literal highlight-python"><span class="n">lattice_pass</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">))</span></code> is the same as
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">lattice_pass</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">)</span></code> since the reference point
len(line) is the exit of the last element.</p></li>
<li><p><code class="code highlight pycode python docutils literal highlight-python"><span class="n">lattice_pass</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code> is a copy of <em>r_in</em>
since the reference point 0 is the entrance of the first element.</p></li>
<li><p>To resume an interrupted tracking (for instance to get intermediate
results), one must use one of the <em>turn</em> or <em>keep_counter</em>
keywords to ensure the continuity of the turn number.</p></li>
<li><p>For multiparticle tracking with large number of turn the size of
<em>r_out</em> may increase excessively. To avoid memory issues
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">lattice_pass</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code> can be used.
An empty list is returned and the tracking results of the last turn
are stored in <em>r_in</em>.</p></li>
<li><p>To model buckets with different RF voltage <code class="code highlight pycode python docutils literal highlight-python"><span class="n">unfold_beam</span><span class="o">=</span><span class="kc">False</span></code>
has to be used. The beam can be unfolded using the function
<a class="reference internal" href="at.tracking.utils.html#at.tracking.utils.unfold_beam" title="at.tracking.utils.unfold_beam"><code class="xref py py-func docutils literal notranslate"><span class="pre">unfold_beam()</span></code></a>. This function takes into account
the true voltage in each bucket and distributes the particles in the
bunches defined by <code class="code docutils literal notranslate"><span class="pre">ring.fillpattern</span></code> using a 6D orbit search.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.linopt2">
<span class="sig-name descname"><span class="pre">linopt2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.linopt2" title="Permalink to this definition">#</a></dt>
<dd><p>Linear analysis of an uncoupled lattice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>refpts</strong> (<em>Refpts</em>) – <p>Elements at which data is returned.
It can be:</p>
<ol class="arabic simple">
<li><p>an integer in the range [-len(ring), len(ring)-1]
selecting the element according to python indexing rules.
As a special case, len(ring) is allowed and refers to the end
of the last element,</p></li>
<li><p>an ordered list of such integers without duplicates,</p></li>
<li><p>a numpy array of booleans of maximum length len(ring)+1,
where selected elements are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
</ol>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>get_chrom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Compute chromaticities. Needs computing
the tune at 2 different momentum deviations around the central one.</p></li>
<li><p><strong>get_w</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Computes chromatic amplitude functions
(W, WP) <a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>, and derivatives of the dispersion and twiss parameters
versus dp. Needs to compute the optics at 2 different momentum
deviations around the central one.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – <p>Initial conditions for transfer line optics.
Record array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or dictionary. Keys:</p>
<dl class="simple">
<dt>R or alpha, beta</dt><dd><p>mandatory (2,) arrays</p>
</dd>
<dt>closed_orbit</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
<dt>dispersion</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
</dl>
<p>If present, the attribute <strong>R</strong> will be used, otherwise the
attributes <strong>alpha</strong> and <strong>beta</strong> will be used. All other attributes
are ignored.</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elemdata0</strong> – Linear optics data at the entrance of the ring</p></li>
<li><p><strong>ringdata</strong> – Lattice properties</p></li>
<li><p><strong>elemdata</strong> – Linear optics at the points refered to by <em>refpts</em>,
if refpts is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> an empty lindata structure is returned.</p></li>
</ul>
</dd>
</dl>
<p><strong>elemdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>s_pos</strong></p></td>
<td><p>longitudinal position [m]</p></td>
</tr>
<tr class="row-even"><td><p><strong>M</strong></p></td>
<td><p>(4, 4) transfer matrix M from the beginning of ring
to the entrance of the element <a class="footnote-reference brackets" href="#id5" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>closed_orbit</strong></p></td>
<td><p>(6,) closed orbit vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>dispersion</strong></p></td>
<td><p>(4,) dispersion vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>beta</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \beta_x,\beta_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>alpha</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \alpha_x,\alpha_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mu</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \mu_x,\mu_y \right]\)</span>, betatron phase
(modulo <span class="math notranslate nohighlight">\(2\pi\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>W</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ W_x,W_y \right]\)</span> only if <em>get_w</em>
is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic amplitude function</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Wp</strong></p></td>
<td><blockquote>
<div><p><span class="math notranslate nohighlight">\(\left[ Wp_x,Wp_y \right]\)</span> only if <em>get_w</em></p>
</div></blockquote>
<p>is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic phase function</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>dalpha</strong></p></td>
<td><p>(2,) alpha derivative vector
(<span class="math notranslate nohighlight">\(\Delta \alpha/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dbeta</strong></p></td>
<td><p>(2,) beta derivative vector
(<span class="math notranslate nohighlight">\(\Delta \beta/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>dmu</strong></p></td>
<td><p>(2,) mu derivative vector
(<span class="math notranslate nohighlight">\(\Delta \mu/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ddispersion</strong></p></td>
<td><p>(4,) dispersion derivative vector
(<span class="math notranslate nohighlight">\(\Delta D/ \delta_p\)</span>)</p></td>
</tr>
</tbody>
</table>
<p>All values given at the entrance of each element specified in refpts.
Field values can be obtained with either <em>lindata[‘idx’]</em> or <em>lindata.idx</em></p>
<p><strong>ringdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tune</strong></p></td>
<td><p>Fractional tunes</p></td>
</tr>
<tr class="row-even"><td><p><strong>chromaticity</strong></p></td>
<td><p>Chromaticities, only computed if <em>get_chrom</em> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><strong>[1]</strong> D.Edwards,L.Teng IEEE Trans.Nucl.Sci. NS-20, No.3, p.885-888
, 1973</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>E.Courant, H.Snyder</p>
</aside>
</aside>
<p><strong>[3]</strong> D.Sagan, D.Rubin Phys.Rev.Spec.Top.-Accelerators and beams,
vol.2 (1999)</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>)</span>
<p>Brian W. Montague Report LEP Note 165, CERN, 1979</p>
</aside>
</aside>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.linopt4">
<span class="sig-name descname"><span class="pre">linopt4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.linopt4" title="Permalink to this definition">#</a></dt>
<dd><p>Linear analysis of a H/V coupled lattice</p>
<p>4D-analysis of coupled motion following Sagan/Rubin</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>refpts</strong> (<em>Refpts</em>) – <p>Elements at which data is returned.
It can be:</p>
<ol class="arabic simple">
<li><p>an integer in the range [-len(ring), len(ring)-1]
selecting the element according to python indexing rules.
As a special case, len(ring) is allowed and refers to the end
of the last element,</p></li>
<li><p>an ordered list of such integers without duplicates,</p></li>
<li><p>a numpy array of booleans of maximum length len(ring)+1,
where selected elements are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
</ol>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>get_chrom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Compute chromaticities. Needs computing
the tune at 2 different momentum deviations around the central one.</p></li>
<li><p><strong>get_w</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Computes chromatic amplitude functions
(W) <a class="footnote-reference brackets" href="#id12" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>. Needs to compute the optics at 2 different momentum
deviations around the central one.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – <p>Initial conditions for transfer line optics.
Record array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or dictionary. Keys:</p>
<dl class="simple">
<dt>R or alpha, beta</dt><dd><p>mandatory (2,) arrays</p>
</dd>
<dt>closed_orbit</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
<dt>dispersion</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
</dl>
<p>If present, the attribute <strong>R</strong> will be used, otherwise the
attributes <strong>alpha</strong> and <strong>beta</strong> will be used. All other attributes
are ignored.</p>
</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elemdata0</strong> – Linear optics data at the entrance of the ring</p></li>
<li><p><strong>ringdata</strong> – Lattice properties</p></li>
<li><p><strong>elemdata</strong> – Linear optics at the points refered to by <em>refpts</em>,
if refpts is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> an empty lindata structure is returned.</p></li>
</ul>
</dd>
</dl>
<p><strong>elemdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>s_pos</strong></p></td>
<td><p>longitudinal position [m]</p></td>
</tr>
<tr class="row-even"><td><p><strong>M</strong></p></td>
<td><p>(4, 4) transfer matrix M from the beginning of ring
to the entrance of the element <a class="footnote-reference brackets" href="#id10" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>closed_orbit</strong></p></td>
<td><p>(6,) closed orbit vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>dispersion</strong></p></td>
<td><p>(4,) dispersion vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>beta</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \beta_x,\beta_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>alpha</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \alpha_x,\alpha_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mu</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \mu_x,\mu_y \right]\)</span>, betatron phase
(modulo <span class="math notranslate nohighlight">\(2\pi\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>gamma</strong></p></td>
<td><p>gamma parameter of the transformation to
eigenmodes <a class="footnote-reference brackets" href="#id11" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>W</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ W_x,W_y \right]\)</span> only if <em>get_w</em>
is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic amplitude function</p></td>
</tr>
<tr class="row-even"><td><p><strong>Wp</strong></p></td>
<td><blockquote>
<div><p><span class="math notranslate nohighlight">\(\left[ Wp_x,Wp_y \right]\)</span> only if <em>get_w</em></p>
</div></blockquote>
<p>is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic phase function</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>dalpha</strong></p></td>
<td><p>(2,) alpha derivative vector
(<span class="math notranslate nohighlight">\(\Delta \alpha/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>dbeta</strong></p></td>
<td><p>(2,) beta derivative vector
(<span class="math notranslate nohighlight">\(\Delta \beta/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dmu</strong></p></td>
<td><p>(2,) mu derivative vector
(<span class="math notranslate nohighlight">\(\Delta \mu/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>ddispersion</strong></p></td>
<td><p>(4,) dispersion derivative vector
(<span class="math notranslate nohighlight">\(\Delta D/ \delta_p\)</span>)</p></td>
</tr>
</tbody>
</table>
<p>All values given at the entrance of each element specified in refpts.
Field values can be obtained with either
<em>lindata[‘idx’]</em> or <em>lindata.idx</em></p>
<p><strong>ringdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tune</strong></p></td>
<td><p>Fractional tunes</p></td>
</tr>
<tr class="row-even"><td><p><strong>chromaticity</strong></p></td>
<td><p>Chromaticities, only computed if <em>get_chrom</em> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><strong>[5]</strong> D.Edwards,L.Teng IEEE Trans.Nucl.Sci. NS-20, No.3, p.885-888
, 1973</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id10" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">6</a><span class="fn-bracket">]</span></span>
<p>E.Courant, H.Snyder</p>
</aside>
<aside class="footnote brackets" id="id11" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">7</a><span class="fn-bracket">]</span></span>
<p>D.Sagan, D.Rubin Phys.Rev.Spec.Top.-Accelerators and beams,
vol.2 (1999)</p>
</aside>
<aside class="footnote brackets" id="id12" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">8</a><span class="fn-bracket">]</span></span>
<p>Brian W. Montague Report LEP Note 165, CERN, 1979</p>
</aside>
</aside>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.linopt6">
<span class="sig-name descname"><span class="pre">linopt6</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.linopt6" title="Permalink to this definition">#</a></dt>
<dd><p>Linear analysis of a fully coupled lattice using normal modes</p>
<p>For circular machines, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.linopt6" title="at.lattice.lattice_object.Lattice.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a> analyses</p>
<ul class="simple">
<li><p>the 4x4 1-turn transfer matrix if <em>ring</em> is 4D, or</p></li>
<li><p>the 6x6 1-turn transfer matrix if  <em>ring</em> is 6D.</p></li>
</ul>
<p>For a transfer line, The “twiss_in” intput must contain either:</p>
<ul class="simple">
<li><p>a field <strong>R</strong>, as provided by ATLINOPT6, or</p></li>
<li><p>the fields <strong>beta</strong> and <strong>alpha</strong>, as provided by linopt and linopt6</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>refpts</strong> (<em>Refpts</em>) – <p>Elements at which data is returned.
It can be:</p>
<ol class="arabic simple">
<li><p>an integer in the range [-len(ring), len(ring)-1]
selecting the element according to python indexing rules.
As a special case, len(ring) is allowed and refers to the end
of the last element,</p></li>
<li><p>an ordered list of such integers without duplicates,</p></li>
<li><p>a numpy array of booleans of maximum length len(ring)+1,
where selected elements are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
</ol>
</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Deviation of RF frequency. Defaults to
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if it is
already known ((6,) array)</p></li>
<li><p><strong>get_chrom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Compute chromaticities. Needs computing
the tune at 2 different momentum deviations around the central one.</p></li>
<li><p><strong>get_w</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Computes chromatic amplitude functions
(W) <a class="footnote-reference brackets" href="#id14" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a>. Needs to compute the optics at 2 different momentum
deviations around the central one.</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – <p>Initial conditions for transfer line optics.
Record array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or dictionary. Keys:</p>
<dl class="simple">
<dt>R or alpha, beta</dt><dd><p>mandatory (2,) arrays</p>
</dd>
<dt>closed_orbit</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
<dt>dispersion</dt><dd><p>Optional (6,) array, default 0</p>
</dd>
</dl>
<p>If present, the attribute <strong>R</strong> will be used, otherwise the
attributes <strong>alpha</strong> and <strong>beta</strong> will be used. All other attributes
are ignored.</p>
</p></li>
<li><p><strong>cavpts</strong> (<em>Refpts</em>) – Cavity location for off-momentum tuning</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elemdata0</strong> – Linear optics data at the entrance of the ring</p></li>
<li><p><strong>ringdata</strong> – Lattice properties</p></li>
<li><p><strong>elemdata</strong> – Linear optics at the points refered to by <em>refpts</em>,
if refpts is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> an empty lindata structure is returned.</p></li>
</ul>
</dd>
</dl>
<p><strong>elemdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>s_pos</strong></p></td>
<td><p>longitudinal position [m]</p></td>
</tr>
<tr class="row-even"><td><p><strong>M</strong></p></td>
<td><p>(6, 6) transfer matrix M from the beginning of ring
to the entrance of the element</p></td>
</tr>
<tr class="row-odd"><td><p><strong>closed_orbit</strong></p></td>
<td><p>(6,) closed orbit vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>dispersion</strong></p></td>
<td><p>(4,) dispersion vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>A</strong></p></td>
<td><p>(6,6) A-matrix</p></td>
</tr>
<tr class="row-even"><td><p><strong>R</strong></p></td>
<td><p>(3, 6, 6) R-matrices</p></td>
</tr>
<tr class="row-odd"><td><p><strong>beta</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \beta_x,\beta_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-even"><td><p><strong>alpha</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \alpha_x,\alpha_y \right]\)</span> vector</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mu</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ \mu_x,\mu_y \right]\)</span>, betatron phase
(modulo <span class="math notranslate nohighlight">\(2\pi\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>W</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(\left[ W_x,W_y \right]\)</span> only if <em>get_w</em>
is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic amplitude function</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Wp</strong></p></td>
<td><blockquote>
<div><p><span class="math notranslate nohighlight">\(\left[ Wp_x,Wp_y \right]\)</span> only if <em>get_w</em></p>
</div></blockquote>
<p>is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>: chromatic phase function</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>dalpha</strong></p></td>
<td><p>(2,) alpha derivative vector
(<span class="math notranslate nohighlight">\(\Delta \alpha/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dbeta</strong></p></td>
<td><p>(2,) beta derivative vector
(<span class="math notranslate nohighlight">\(\Delta \beta/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>dmu</strong></p></td>
<td><p>(2,) mu derivative vector
(<span class="math notranslate nohighlight">\(\Delta \mu/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ddispersion</strong></p></td>
<td><p>(4,) dispersion derivative vector
(<span class="math notranslate nohighlight">\(\Delta D/ \delta_p\)</span>)</p></td>
</tr>
<tr class="row-even"><td><p><strong>dR</strong></p></td>
<td><p>(3, 6, 6) R derivative vector
(<span class="math notranslate nohighlight">\(\Delta R/ \delta_p\)</span>)</p></td>
</tr>
</tbody>
</table>
<p>All values given at the entrance of each element specified in refpts.
Field values can be obtained with either
<em>lindata[‘idx’]</em> or <em>lindata.idx</em></p>
<p><strong>ringdata</strong> is a record array with fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tune</strong></p></td>
<td><p>Fractional tunes</p></td>
</tr>
<tr class="row-even"><td><p><strong>chromaticity</strong></p></td>
<td><p>Chromaticities, only computed if <em>get_chrom</em> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>damping_time</strong></p></td>
<td><p>Damping times [s] (only if radiation is ON)</p></td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><strong>[9]</strong> Etienne Forest, Phys. Rev. E 58, 2481 – Published 1 August 1998</p>
<p><strong>[10]</strong> Andrzej Wolski, Phys. Rev. ST Accel. Beams 9, 024001 –
Published 3 February 2006</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id14" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id13">11</a><span class="fn-bracket">]</span></span>
<p>Brian W. Montague Report LEP Note 165, CERN, 1979</p>
</aside>
</aside>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.load" title="Permalink to this definition">#</a></dt>
<dd><p>Load a Lattice object from a file</p>
<p>The file format is indicated by the filepath extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the file</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the lattice.
Default: taken from the file, or <code class="docutils literal notranslate"><span class="pre">''</span></code></p></li>
<li><p><strong>energy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Energy of the lattice
(default: taken from the file)</p></li>
<li><p><strong>periodicity</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – Number of periods
(default: taken from the file, or 1)</p></li>
<li><p><strong>*</strong> – All other keywords will be set as <a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a>
attributes</p></li>
</ul>
</dd>
</dl>
<p>Specific keywords for .mat files</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the Matlab variable containing
the lattice. Default: Matlab variable name if there is only one,
otherwise <code class="docutils literal notranslate"><span class="pre">'RING'</span></code></p></li>
<li><p><strong>check</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Run coherence tests. Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
<li><p><strong>quiet</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Suppress the warning for non-standard classes.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>keep_all</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Keep Matlab RingParam elements as Markers.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>lattice</strong> (<em>Lattice</em>) – New <a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> object</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="at.load.matfile.html#at.load.matfile.load_mat" title="at.load.matfile.load_mat"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_mat()</span></code></a>, <a class="reference internal" href="at.load.matfile.html#at.load.matfile.load_m" title="at.load.matfile.load_m"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_m()</span></code></a>, <a class="reference internal" href="at.load.reprfile.html#at.load.reprfile.load_repr" title="at.load.reprfile.load_repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_repr()</span></code></a>,
<a class="reference internal" href="at.load.elegant.html#at.load.elegant.load_elegant" title="at.load.elegant.load_elegant"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_elegant()</span></code></a>, <a class="reference internal" href="at.load.tracy.html#at.load.tracy.load_tracy" title="at.load.tracy.load_tracy"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_tracy()</span></code></a></p>
</div>
<div class="admonition-known-extensions-are admonition">
<p class="admonition-title">Known extensions are:</p>
<dl class="simple">
<dt>.mat</dt><dd><p>Matlab binary mat-file</p>
</dd>
<dt>.m</dt><dd><p>Matlab text m-file</p>
</dd>
<dt>.repr</dt><dd><p>Text representation of a python AT Lattice</p>
</dd>
<dt>.lat</dt><dd><p>Tracy format</p>
</dd>
<dt>.lte</dt><dd><p>Elegant format</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.modify_elements">
<span class="sig-name descname"><span class="pre">modify_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elem_modify</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.modify_elements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.modify_elements" title="Permalink to this definition">#</a></dt>
<dd><p>Modify selected elements, in-place or in a lattice copy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elem_modify</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)"><em>Callable</em></a>) – element selection function.
If <code class="docutils literal notranslate"><span class="pre">elem_modify(elem)</span></code> returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the element is
unchanged. Otherwise, <code class="docutils literal notranslate"><span class="pre">elem_modify(elem)</span></code> must return a
dictionary of attribute name and values, to be set to elem.</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – If True, return a shallow copy of the lattice.
Only the modified elements are copied.
If False, the modification is done in-place</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newring</strong> – New lattice if copy is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
if copy is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p>
</dd>
</dl>
<p>Keyword Arguments:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.ohmi_envelope">
<span class="sig-name descname"><span class="pre">ohmi_envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orbit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_lattice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.ohmi_envelope" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the equilibrium beam envelope</p>
<p>Computation based on Ohmi’s beam envelope formalism <a class="footnote-reference brackets" href="#id16" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description. Radiation must be ON</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Observation points</p></li>
<li><p><strong>orbit</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><em>ndarray</em></a>) – Avoids looking for initial the closed orbit if it is
already known ((6,) array).</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the previous tracking.
Default: False</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>emit0</strong> (<em>numpy.recarray</em>) – Emittance data at the start/end of the ring</p></li>
<li><p><strong>beamdata</strong> (<em>numpy.recarray</em>) – Beam parameters at the start of the ring</p></li>
<li><p><strong>emit</strong> (<em>numpy.recarray</em>) – Emittance data at the points selected to by
<code class="docutils literal notranslate"><span class="pre">refpts</span></code></p></li>
</ul>
</dd>
</dl>
<p><strong>emit</strong> is a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.recarray.html#numpy.recarray" title="(in NumPy v1.26)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">record</span> <span class="pre">array</span></code></a> with the following
fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>r66</strong></p></td>
<td><p>(6, 6) equilibrium envelope matrix R</p></td>
</tr>
<tr class="row-even"><td><p><strong>r44</strong></p></td>
<td><p>(4, 4) betatron emittance matrix (dpp = 0)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>m66</strong></p></td>
<td><p>(6, 6) transfer matrix from the start of the ring</p></td>
</tr>
<tr class="row-even"><td><p><strong>orbit6</strong></p></td>
<td><p>(6,) closed orbit</p></td>
</tr>
<tr class="row-odd"><td><p><strong>emitXY</strong></p></td>
<td><p>(2,) betatron emittance projected on xxp and yyp</p></td>
</tr>
<tr class="row-even"><td><p><strong>emitXYZ</strong></p></td>
<td><p>(3,) 6x6 emittance projected on xxp, yyp, ldp</p></td>
</tr>
</tbody>
</table>
<p>Values given at the entrance of each element specified in <code class="docutils literal notranslate"><span class="pre">refpts</span></code>.</p>
<p>Field values can be obtained with either
<code class="docutils literal notranslate"><span class="pre">emit['r66']</span></code> or <code class="docutils literal notranslate"><span class="pre">emit.r66</span></code></p>
<p><strong>beamdata</strong> is a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.recarray.html#numpy.recarray" title="(in NumPy v1.26)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">record</span> <span class="pre">array</span></code></a> with the
following fields:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tunes</strong></p></td>
<td><p>tunes of the 3 normal modes</p></td>
</tr>
<tr class="row-even"><td><p><strong>damping_rates</strong></p></td>
<td><p>damping rates of the 3 normal modes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mode_matrices</strong></p></td>
<td><p>R-matrices of the 3 normal modes</p></td>
</tr>
<tr class="row-even"><td><p><strong>mode_emittances</strong></p></td>
<td><p>equilibrium emittances of the 3 normal modes</p></td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id16" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id15">1</a><span class="fn-bracket">]</span></span>
<p>K.Ohmi et al. Phys.Rev.E. Vol.49. (1994)</p>
</aside>
</aside>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.plot_acceptance">
<span class="sig-name descname"><span class="pre">plot_acceptance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">planes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.plot_acceptance" title="Permalink to this definition">#</a></dt>
<dd><p>Plots the acceptance</p>
<p>Computes the acceptance at repfts observation points using
<a class="reference internal" href="at.acceptance.acceptance.html#at.acceptance.acceptance.get_acceptance" title="at.acceptance.acceptance.get_acceptance"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_acceptance()</span></code></a> and plots the tracked
and survived particles, and the acceptance boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice definition</p></li>
<li><p><strong>planes</strong> – max. dimension 2, Plane(s) to scan for the acceptance.
Allowed values are: <em>‘x’</em>, <em>‘xp’</em>, <em>‘y’</em>,
<em>‘yp’</em>, <em>‘dp’</em>, <em>‘ct’</em></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>acceptance</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>[</em><em>ndarray</em><em>, </em><em>ndarray</em><em>, </em><em>ndarray</em><em>]</em>) – tuple containing
pre-computed acceptance <em>(boundary, survived, grid)</em></p></li>
<li><p><strong>npoints</strong> – (len(planes),) array: number of points in each
dimension</p></li>
<li><p><strong>amplitudes</strong> – <p>(len(planes),) array: set the search range:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN/RADIAL</span></code></a>:
max. amplitude</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: initial step</p></li>
</ul>
</p></li>
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of turns for the tracking</p></li>
<li><p><strong>obspt</strong> (<em>Refpts</em>) – Observation points. Default: start of the machine</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Static momentum offset</p></li>
<li><p><strong>offset</strong> – Initial orbit. Default: closed orbit</p></li>
<li><p><strong>bounds</strong> – <p>Defines the tracked range: range=bounds*amplitude.
It can be used to select quadrants. For example, default values are:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: ((-1, 1), (0, 1))</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL/RECURSIVE</span></code></a>: ((0, 1),
(<span class="math notranslate nohighlight">\(\pi\)</span>, 0))</p></li>
</ul>
</p></li>
<li><p><strong>grid_mode</strong> (<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode" title="at.acceptance.boundary.GridMode"><em>GridMode</em></a>) – <p>Defines the evaluation grid:</p>
<ul>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.CARTESIAN" title="at.acceptance.boundary.GridMode.CARTESIAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.CARTESIAN</span></code></a>: full [<span class="math notranslate nohighlight">\(\:x, y\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RADIAL" title="at.acceptance.boundary.GridMode.RADIAL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RADIAL</span></code></a>: full [<span class="math notranslate nohighlight">\(\:r, \theta\:\)</span>] grid</p></li>
<li><p><a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>: radial recursive search</p></li>
</ul>
</p></li>
<li><p><strong>use_mp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Use python multiprocessing (<a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.patpass" title="at.tracking.deprecated.patpass"><code class="xref py py-func docutils literal notranslate"><span class="pre">patpass()</span></code></a>,
default use <a class="reference internal" href="at.tracking.deprecated.html#at.tracking.deprecated.lattice_pass" title="at.tracking.deprecated.lattice_pass"><code class="xref py py-func docutils literal notranslate"><span class="pre">lattice_pass()</span></code></a>). In case multiprocessing is not
enabled, <em>grid_mode</em> is forced to <a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a>
(most efficient in single core)</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Print out some information</p></li>
<li><p><strong>divider</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Value of the divider used in
<a class="reference internal" href="at.acceptance.boundary.html#at.acceptance.boundary.GridMode.RECURSIVE" title="at.acceptance.boundary.GridMode.RECURSIVE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GridMode.RECURSIVE</span></code></a> boundary search</p></li>
<li><p><strong>shift_zero</strong> – </p></li>
<li><p><strong>start_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Python multiprocessing start method. The default
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> uses the python default that is considered safe.
Available parameters: <em>‘fork’</em>, <em>‘spawn’</em>, <em>‘forkserver’</em>.
The default for linux is <em>‘fork’</em>, the default for macOS and
Windows is <em>‘spawn’</em>. <em>‘fork’</em> may be used for macOS to speed up
the calculation or to solve runtime errors, however  it is
considered unsafe.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boundary</strong> – (2,n) array: 2D acceptance</p></li>
<li><p><strong>tracked</strong> – (2,n) array: Coordinates of tracked particles</p></li>
<li><p><strong>survived</strong> – (2,n) array: Coordinates of surviving particles</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">plot_acceptance</span><span class="p">(</span><span class="n">planes</span><span class="p">,</span> <span class="n">npoints</span><span class="p">,</span> <span class="n">amplitudes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.plot_beta">
<span class="sig-name descname"><span class="pre">plot_beta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.plot_beta" title="Permalink to this definition">#</a></dt>
<dd><p>Plot beta functions and dispersion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum deviation.</p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. If specified, <code class="docutils literal notranslate"><span class="pre">dp</span></code> is
ignored and the off-momentum is deduced from the path lengthening.</p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if is
already known ((6,) array)</p></li>
<li><p><strong>method</strong> (<em>Callable</em>) – <p>Method for linear optics (see
<a class="reference internal" href="at.physics.linear.html#at.physics.linear.get_optics" title="at.physics.linear.get_optics"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_optics()</span></code></a>):</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt2" title="at.physics.linear.linopt2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt2</span></code></a>: no longitudinal motion, no H/V coupling,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt4" title="at.physics.linear.linopt4"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt4</span></code></a>: no longitudinal motion, Sagan/Rubin
4D-analysis of coupled motion,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt6</span></code></a> (default): with or without longitudinal
motion, normal mode analysis</p>
</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
<li><p><strong>twiss_in</strong> – Initial conditions for transfer line optics. Record
array as output by <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt2" title="at.physics.linear.linopt2"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt2()</span></code></a>, <a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-func docutils literal notranslate"><span class="pre">linopt6()</span></code></a>, or
dictionary.</p></li>
<li><p><strong>s_range</strong> – Lattice range of interest, default: unchanged,
initially set to the full cell.</p></li>
<li><p><strong>axes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>[</em><em>Axes</em><em>, </em><em>Optional</em><em>[</em><em>Axes</em><em>]</em>) – <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>
for plotting as (primary_axes, secondary_axes).
Default: create new axes</p></li>
<li><p><strong>slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of slices. Default: 400</p></li>
<li><p><strong>legend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Show a legend on the plot</p></li>
<li><p><strong>labels</strong> (<em>Refpts</em>) – display the name of selected elements.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>block</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, block until the figure is closed.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>dipole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Dictionary of properties overloading the default
properties of dipole representation. See <a class="reference internal" href="at.plot.synopt.html#at.plot.synopt.plot_synopt" title="at.plot.synopt.plot_synopt"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_synopt()</span></code></a>
for details</p></li>
<li><p><strong>quadrupole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>sextupole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>multipole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>monitor</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.plot_geometry">
<span class="sig-name descname"><span class="pre">plot_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_coordinates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.plot_geometry" title="Permalink to this definition">#</a></dt>
<dd><p>Compute and plot the 2D ring geometry in cartesian coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>start_coordinates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – x,y,angle at starting point</p></li>
<li><p><strong>centered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – it True the coordinates origin is the center of the ring</p></li>
<li><p><strong>ax</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.0)"><em>Axes</em></a><em>]</em>) – axes for the plot. If not given, new axes are created</p></li>
</ul>
</dd>
</dl>
<p>Keyword arguments are forwarded to the underlying
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" title="(in Matplotlib v3.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot()</span></code></a> function</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geomdata</strong> – recarray containing, x, y, angle</p></li>
<li><p><strong>radius</strong> – machine radius</p></li>
<li><p><strong>ax</strong> – plot axis</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.plot_trajectory">
<span class="sig-name descname"><span class="pre">plot_trajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.plot_trajectory" title="Permalink to this definition">#</a></dt>
<dd><p>Plot a particle’s trajectory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice object</p></li>
<li><p><strong>r_in</strong> – (6,n) array: input coordinates of n particles</p></li>
<li><p><strong>nturns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of turns</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Assume no lattice change since the
previous tracking. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>s_range</strong> – Lattice range of interest, default: unchanged,
initially set to the full cell.</p></li>
<li><p><strong>axes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em>[</em><em>Axes</em><em>, </em><em>Optional</em><em>[</em><em>Axes</em><em>]</em>) – <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>
for plotting as (primary_axes, secondary_axes).
Default: create new axes</p></li>
<li><p><strong>slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of slices. Default: 400</p></li>
<li><p><strong>legend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Show a legend on the plot</p></li>
<li><p><strong>block</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, block until the figure is closed.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a></p></li>
<li><p><strong>dipole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Dictionary of properties overloading the default
properties of dipole representation. See <a class="reference internal" href="at.plot.synopt.html#at.plot.synopt.plot_synopt" title="at.plot.synopt.plot_synopt"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_synopt()</span></code></a>
for details</p></li>
<li><p><strong>quadrupole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>sextupole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>multipole</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
<li><p><strong>monitor</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – Same definition as for dipole</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.radiation_off">
<span class="sig-name descname"><span class="pre">radiation_off</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.radiation_off"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.radiation_off" title="Permalink to this definition">#</a></dt>
<dd><p>Obsolete. Turn longitudinal motion off</p>
<p>The function name is misleading, since the function deals with
longitudinal motion in general.</p>
<p>For this reason <strong>the method is obsolete</strong> and replaced by
<a class="reference internal" href="#at.lattice.lattice_object.Lattice.disable_6d" title="at.lattice.lattice_object.Lattice.disable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disable_6d()</span></code></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.disable_6d" title="at.lattice.lattice_object.Lattice.disable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disable_6d()</span></code></a></p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.radiation_on">
<span class="sig-name descname"><span class="pre">radiation_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.radiation_on"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.radiation_on" title="Permalink to this definition">#</a></dt>
<dd><p>Obsolete. Turn longitudinal motion on</p>
<p>The function name is misleading, since the function deals with
longitudinal motion in general.</p>
<p>For this reason <strong>the method is obsolete</strong> and replaced by
<a class="reference internal" href="#at.lattice.lattice_object.Lattice.enable_6d" title="at.lattice.lattice_object.Lattice.enable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_6d()</span></code></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.enable_6d" title="at.lattice.lattice_object.Lattice.enable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_6d()</span></code></a></p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.radiation_parameters">
<span class="sig-name descname"><span class="pre">radiation_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.radiation_parameters" title="Permalink to this definition">#</a></dt>
<dd><p>Compute ring parameters from the radiation integrals</p>
<p>Valid for uncoupled lattices with no RF cavity or radiating element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description.</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><em>RingParameters</em></a><em>]</em>) – <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object to be updated.
Default: create a new one</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Path lengthening. If specified, <code class="docutils literal notranslate"><span class="pre">dp</span></code> is
ignored and the off-momentum is deduced from the path lengthening.</p></li>
<li><p><strong>method</strong> (<em>Callable</em>) – <p>Method for linear optics:</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt2" title="at.physics.linear.linopt2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt2</span></code></a>: no longitudinal motion, no H/V coupling,</p>
<p><a class="reference internal" href="at.physics.linear.html#at.physics.linear.linopt6" title="at.physics.linear.linopt6"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linopt6</span></code></a> (default): with or without longitudinal
motion, normal mode analysis</p>
</p></li>
<li><p><strong>orbit</strong> (<em>Orbit</em>) – Avoids looking for the closed orbit if is
already known ((6,) array)</p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> – <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object.</p>
</dd>
</dl>
<p><strong>params</strong> is a <a class="reference internal" href="at.physics.ring_parameters.html#at.physics.ring_parameters.RingParameters" title="at.physics.ring_parameters.RingParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingParameters</span></code></a> object with the following
attributes:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>tunes</strong></p></td>
<td><p>(3,) fractional (H, V, Long.) tunes</p></td>
</tr>
<tr class="row-even"><td><p><strong>fulltunes</strong></p></td>
<td><p>(3,) full tunes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>chromaticities</strong></p></td>
<td><p>(2,) H, V Chromaticities</p></td>
</tr>
<tr class="row-even"><td><p><strong>alphac</strong></p></td>
<td><p>Momentum compaction factor</p></td>
</tr>
<tr class="row-odd"><td><p><strong>etac</strong></p></td>
<td><p>Frequency slip factor</p></td>
</tr>
<tr class="row-even"><td><p><strong>E0</strong></p></td>
<td><p>Energy [eV]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>U0</strong></p></td>
<td><p>Energy loss / turn [eV]</p></td>
</tr>
<tr class="row-even"><td><p><strong>i1</strong></p></td>
<td><p>Radiation integrals - <span class="math notranslate nohighlight">\(I_1 \quad [m]\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>i2</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(I_2 \quad [m^{-1}]\)</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>i3</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(I_3 \quad [m^{-2}]\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>i4</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(I_4 \quad [m^{-1}]\)</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>i5</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(I_5 \quad [m^{-1}]\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>emittances</strong></p></td>
<td><p>(3,) Mode emittances</p></td>
</tr>
<tr class="row-even"><td><p><strong>J</strong></p></td>
<td><p>(3,) Damping partition numbers</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Tau</strong></p></td>
<td><p>(3,) Damping times [s]</p></td>
</tr>
<tr class="row-even"><td><p><strong>sigma_e</strong></p></td>
<td><p>Energy spread</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sigma_l</strong></p></td>
<td><p>Bunch length [m]</p></td>
</tr>
<tr class="row-even"><td><p><strong>voltage</strong></p></td>
<td><p>Total accelerating voltage [V]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>phi_s</strong></p></td>
<td><p>Synchrotron phase [rad]</p></td>
</tr>
<tr class="row-even"><td><p><strong>f_s</strong></p></td>
<td><p>Synchrotron frequency [Hz]</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.reduce">
<span class="sig-name descname"><span class="pre">reduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.reduce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.reduce" title="Permalink to this definition">#</a></dt>
<dd><p>Removes all elements with an <code class="docutils literal notranslate"><span class="pre">IdentityPass</span></code> PassMethod and merges
compatible consecutive elements.</p>
<p>The “reduced” lattice has the same optics as the original one, but
fewer elements. Compatible elements must have the same <code class="docutils literal notranslate"><span class="pre">PolynomA</span></code>,
<code class="docutils literal notranslate"><span class="pre">PolynomB</span></code> and bending radius, so that the optics is preserved. But
magnet misalignments are not preserved, so this method should be
applied to lattices without errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keep</strong> (<em>Refpts</em>) – Keep the selected elements, even with
<code class="docutils literal notranslate"><span class="pre">IdentityPass</span></code> PassMethod. Default: keep <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Monitor" title="at.lattice.elements.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Monitor</span></code></a>
and <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.RFCavity" title="at.lattice.elements.RFCavity"><code class="xref py py-class docutils literal notranslate"><span class="pre">RFCavity</span></code></a> elements</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.refcount">
<span class="sig-name descname"><span class="pre">refcount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.refcount" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the number of reference points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, allow <em>len(ring)</em> as a
special index, referring to the end of the last element.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>nrefs</strong> (<em>int</em>) – The number of reference points</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">refcount</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">Sextupole</span><span class="p">)</span>
<span class="go">6</span>
</pre></div>
</div>
<p>Returns the number of <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Sextupole" title="at.lattice.elements.Sextupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sextupole</span></code></a>s in the lattice</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">refcount</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">All</span><span class="p">)</span>
<span class="go">122</span>
</pre></div>
</div>
<p>Returns <em>len(ring)+1</em></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refpts</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">refcount</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">All</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">121</span>
</pre></div>
</div>
<p>Returns <em>len(ring)</em></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.repeat">
<span class="sig-name descname"><span class="pre">repeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.repeat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.repeat" title="Permalink to this definition">#</a></dt>
<dd><p>This method allows to repeat the lattice <cite>n</cite> times.
If <cite>n</cite> does not divide <cite>ring.periodicity</cite>, the new ring
periodicity is set to 1, otherwise  it is et to
<cite>ring.periodicity /= n</cite>.</p>
<p>Equivalents syntaxes:
&gt;&gt;&gt; newring = ring.repeat(n)
&gt;&gt;&gt; newring = ring * n</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – number of repetition</p></li>
<li><p><strong>copy_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> deepcopies of the
lattice are used for the repetition</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newring</strong> (<em>Lattice</em>) – the new repeated lattice</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.replace" title="Permalink to this definition">#</a></dt>
<dd><p>Return a shallow copy of the lattice replacing the selected
elements by a deep copy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – element selector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.reverse">
<span class="sig-name descname"><span class="pre">reverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.reverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.reverse" title="Permalink to this definition">#</a></dt>
<dd><p>Reverse the order of the lattice and swapt the faces
of elements. Alignment errors are not swapped</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Default <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>
the lattice is modified in place.
Oterwise a new Lattice object is returned</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>lattice</strong> (<em>Lattice</em>) – reversed Lattice, if <cite>copy==True</cite> the
new lattice object is returned
otherwise None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newring</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.rotate">
<span class="sig-name descname"><span class="pre">rotate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.rotate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.rotate" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new lattice rotated left by n elements</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.save" title="Permalink to this definition">#</a></dt>
<dd><p>Save a Lattice object</p>
<p>The file format is indicated by the filepath extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>filepath</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the file</p></li>
</ul>
</dd>
</dl>
<p>Specific keywords for .mat files</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mat_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Name of the Matlab variable containing the lattice.
Default: <code class="docutils literal notranslate"><span class="pre">'RING'</span></code></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="at.load.matfile.html#at.load.matfile.save_mat" title="at.load.matfile.save_mat"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_mat()</span></code></a>, <a class="reference internal" href="at.load.matfile.html#at.load.matfile.save_m" title="at.load.matfile.save_m"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_m()</span></code></a>, <a class="reference internal" href="at.load.reprfile.html#at.load.reprfile.save_repr" title="at.load.reprfile.save_repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_repr()</span></code></a></p>
</div>
<div class="admonition-known-extensions-are admonition">
<p class="admonition-title">Known extensions are:</p>
<dl class="simple">
<dt>.mat</dt><dd><p>Matlab binary mat-file</p>
</dd>
<dt>.m</dt><dd><p>Matlab text m-file</p>
</dd>
<dt>.repr</dt><dd><p>Text representation of a python AT Lattice</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.sbreak">
<span class="sig-name descname"><span class="pre">sbreak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">break_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">break_elems</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.sbreak"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.sbreak" title="Permalink to this definition">#</a></dt>
<dd><p>Insert elements at selected locations in the lattice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>break_s</strong> – location or array of locations of breakpoints</p></li>
<li><p><strong>break_elems</strong> – elements to be inserted at breakpoints (array of
elements as long as break_s or single element
duplicated as necessary). Default: Marker(‘sbreak’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newring</strong> – A new lattice with new elements inserted at breakpoints</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.select" title="Permalink to this definition">#</a></dt>
<dd><p>Return an iterator over selected elements in a lattice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>elem_iter</strong> (<em>Iterator[Element]</em>) – Iterator over the elements in <em>ring</em>
selected by <em>refpts</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_beam_current">
<span class="sig-name descname"><span class="pre">set_beam_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_history</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.set_beam_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_beam_current" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_cavity">
<span class="sig-name descname"><span class="pre">set_cavity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Voltage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TimeLag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cavpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_cavity" title="Permalink to this definition">#</a></dt>
<dd><p>Set the parameters of the RF cavities</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – lattice description</p></li>
<li><p><strong>Frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – RF frequency [Hz]</p></li>
<li><p><strong>Voltage</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – RF voltage [V]</p></li>
<li><p><strong>TimeLag</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – RF time shift [-ct]</p></li>
<li><p><strong>cavpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Cavity location. If None, look for ring.cavpts, or
otherwise take all cavities</p></li>
<li><p><strong>array</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – If False, the value is applied as described for
set_rf_voltage, set_rf_timelag and set_rf_frequency
If True, directly apply the value to the selected
cavities. The value must be broadcastable to the number
of cavities.</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – If True, returns a shallow copy of ring with new
cavity elements. Otherwise, modify ring in-place</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_cavity_phase">
<span class="sig-name descname"><span class="pre">set_cavity_phase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ELossMethod.TRACKING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cavpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_cavity_phase" title="Permalink to this definition">#</a></dt>
<dd><p>Adjust the TimeLag attribute of RF cavities based on frequency,
voltage and energy loss per turn, so that the synchronous phase is zero.
An error occurs if all cavities do not have the same frequency.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function changes the time reference, this should be avoided</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>method</strong> (<a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><em>ELossMethod</em></a>) – Method for energy loss computation.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">ELossMethod</span></code>.</p></li>
<li><p><strong>cavpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Cavity location. If None, use all cavities.
This allows to ignore harmonic cavities.</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True, returns a shallow copy of ring with new
cavity elements. Otherwise, modify ring in-place.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_fillpattern">
<span class="sig-name descname"><span class="pre">set_fillpattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bunches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.set_fillpattern"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_fillpattern" title="Permalink to this definition">#</a></dt>
<dd><p>Function to generate the filling pattern lof the ring.
The filling pattern is computed as:</p>
<p><code class="docutils literal notranslate"><span class="pre">bunches/numpy.sum(bunches)</span></code></p>
<p>This function also generates the bunch spatial distribution
accessible with <code class="docutils literal notranslate"><span class="pre">Lattice.bunch_spos</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bunches</strong> – integer or array of positive double or bool to define
the bunch distribution.
For scalar input, equidistant bunches are assumed.
<code class="docutils literal notranslate"><span class="pre">ring.harmonic_number</span></code> has to be a multiple of
<code class="docutils literal notranslate"><span class="pre">bunches</span></code>.
For array input the condition
<code class="docutils literal notranslate"><span class="pre">len(bunches)==ring.harmonic_number</span></code> is required.
(default=1, single bunch configuration).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_rf_frequency">
<span class="sig-name descname"><span class="pre">set_rf_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_rf_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Set the RF frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – RF frequency [Hz]. Default: nominal frequency.</p></li>
<li><p><strong>dp</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Momentum deviation. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>dct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Path lengthening. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
<li><p><strong>df</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – Deviation of RF frequency. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts</strong> (<em>Optional</em><em>[</em><em>Refpts</em><em>]</em>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, look for ring.cavpts, or
otherwise take all cavities.</p></li>
<li><p><strong>array</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – <p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> (default), <em>frequency</em>
is applied to the selected cavities with the lowest frequency. The
frequency of all the other selected cavities is scaled by the same
ratio.</p>
<p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, directly apply <em>frequency</em> to the selected
cavities. The value must be broadcastable to the number of cavities.</p>
</p></li>
<li><p><strong>copy</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, returns a shallow copy of
<em>ring</em> with new cavity elements. Otherwise (default), modify
<em>ring</em> in-place</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_rf_timelag">
<span class="sig-name descname"><span class="pre">set_rf_timelag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timelag</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_rf_timelag" title="Permalink to this definition">#</a></dt>
<dd><p>Set the RF time lag</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>timelag</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – RF time lag</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts=None</strong> – Cavity location. If None, look for ring.cavpts,
otherwise take all cavities.</p></li>
<li><p><strong>array=False</strong> – <p>If False, return the frequency of the selected cavities
with the lowest frequency.</p>
<p>If True, return the frequency of all selected cavities</p>
</p></li>
<li><p><strong>copy=False</strong> – If True, returns a shallow copy of <code class="docutils literal notranslate"><span class="pre">ring</span></code> with new
cavity elements. Otherwise, modify <code class="docutils literal notranslate"><span class="pre">ring</span></code> in-place.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_rf_voltage">
<span class="sig-name descname"><span class="pre">set_rf_voltage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voltage</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_rf_voltage" title="Permalink to this definition">#</a></dt>
<dd><p>Set the RF voltage for the full ring</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>voltage</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Total RF voltage (full ring)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cavpts=None</strong> – Cavity location. If None, look for ring.cavpts,
otherwise take all cavities.</p></li>
<li><p><strong>array=False</strong> – <p>If False, return the frequency of the selected cavities
with the lowest frequency.</p>
<p>If True, return the frequency of all selected cavities</p>
</p></li>
<li><p><strong>copy=False</strong> – If True, returns a shallow copy of <code class="docutils literal notranslate"><span class="pre">ring</span></code> with new
cavity elements. Otherwise, modify <code class="docutils literal notranslate"><span class="pre">ring</span></code> in-place.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_shift">
<span class="sig-name descname"><span class="pre">set_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dzs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_shift" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the translations of a list of elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>dxs</strong> – Sequence of horizontal displacements values as long as
ring or scalar value applied to all elements [m]</p></li>
<li><p><strong>dzs</strong> – Sequence of vertical displacements values as long as
ring or scalar value applied to all elements [m]</p></li>
<li><p><strong>relative</strong> – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, the displacement is added to the
existing one</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_tilt">
<span class="sig-name descname"><span class="pre">set_tilt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tilts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_tilt" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the tilts of a list of elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>tilts</strong> – Sequence of tilt values as long as ring or
scalar tilt value applied to all elements</p></li>
<li><p><strong>relative</strong> – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, the rotation is added to the
existing one</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_value_refpts">
<span class="sig-name descname"><span class="pre">set_value_refpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrvalues</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_value_refpts" title="Permalink to this definition">#</a></dt>
<dd><p>Set the values of an attribute of an array of elements based on
their refpts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Lattice description</p></li>
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>attrname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Attribute name</p></li>
<li><p><strong>attrvalues</strong> – Attribute values</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – index of the value to set if <em>attrname</em> is
an array. if <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the full array is replaced by
<em>attrvalue</em></p></li>
<li><p><strong>increment</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Add values to the initial values.</p></li>
<li><p><strong>regex</strong> – <dl class="simple">
<dt>Use regular expression for refpts string matching;</dt><dd><p>Default: False (Unix shell-style wildcards)</p>
</dd>
</dl>
<p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> the initial value is replaced (Default)</p>
</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – <p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, the modification is done in-place,</p>
<p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, return a shallow copy of the lattice. Only the
modified elements are copied.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>a shallow copy means that all non-modified
elements are shared with the original lattice.
Any further modification will affect in both lattices.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.set_wake_turnhistory">
<span class="sig-name descname"><span class="pre">set_wake_turnhistory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.set_wake_turnhistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.set_wake_turnhistory" title="Permalink to this definition">#</a></dt>
<dd><p>Function to reset the shape of the turn history
in collective elements based on the number of slices,
turns and bunches</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.slice" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new lattice by slicing the range of interest into small
elements</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size=None</strong> – Length of a slice. Default: computed from the
range and number of points: <code class="docutils literal notranslate"><span class="pre">size</span> <span class="pre">=</span> <span class="pre">(s_max-s_min)/slices</span></code>.</p></li>
<li><p><strong>slices=1</strong> – Number of slices in the specified range. Ignored if
size is specified. Default: no slicing</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newring</strong> – New Lattice object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.slice_elements">
<span class="sig-name descname"><span class="pre">slice_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.slice_elements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.slice_elements" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new lattice by slicing the elements at refpts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selector</p></li>
<li><p><strong>slices</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of slices in the specified range. Ignored if
size is specified. Default: no slicing</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>newring</strong> – New Lattice object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.tapering">
<span class="sig-name descname"><span class="pre">tapering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multipoles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.tapering" title="Permalink to this definition">#</a></dt>
<dd><p>Scales magnet strengths</p>
<p>Scales magnet strengths with local energy to cancel the closed orbit
and optics errors due to synchrotron radiations. The dipole bending angle
is changed by changing the reference momentum. This is the ideal
tapering scheme where magnets and multipoles components (PolynomB and
PolynomA) are scaled individually.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method works only for lattices without errors and
corrections: if not all corrections and field errors will also be
scaled !!!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – Lattice description</p></li>
<li><p><strong>multipoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Scales all multipoles</p></li>
<li><p><strong>niter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of iteration</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><em>ELossMethod</em></a>) – Method for energy loss computation.
See <a class="reference internal" href="at.physics.energy_loss.html#at.physics.energy_loss.ELossMethod" title="at.physics.energy_loss.ELossMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">ELossMethod</span></code></a></p></li>
<li><p><strong>XYStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.XYStep</span></code></a></p></li>
<li><p><strong>DPStep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Momentum step size.
Default: <a class="reference internal" href="at.lattice.options.html#at.lattice.options.DConstant" title="at.lattice.options.DConstant"><code class="xref py py-data docutils literal notranslate"><span class="pre">DConstant.DPStep</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.track">
<span class="sig-name descname"><span class="pre">track</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">RefptsCode.End</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.track" title="Permalink to this definition">#</a></dt>
<dd><p><code class="xref py py-func docutils literal notranslate"><span class="pre">track_function()</span></code> tracks particles through each element of a
lattice or throught a single Element calling the element-specific
tracking function specified in the Element’s <em>PassMethod</em> field.</p>
<dl>
<dt>Usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lattice_track</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lattice</span><span class="o">.</span><span class="n">track</span><span class="p">(</span><span class="n">r_in</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – list of elements</p></li>
<li><p><strong>r_in</strong> – (6, N) array: input coordinates of N particles.
<em>r_in</em> is modified in-place only if <em>in_place</em> is
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> and reports the coordinates at
the end of the element. For the best efficiency, <em>r_in</em>
should be given as F_CONTIGUOUS numpy array.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nturns</strong> – number of turns to be tracked</p></li>
<li><p><strong>refpts</strong> – Selects the location of coordinates output.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>in_place</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True <em>r_in</em> is modified in-place and
reports the coordinates at the end of the element.
(default: False)</p></li>
<li><p><strong>keep_lattice</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Use elements persisted from a previous
call. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, assume that the lattice has not changed
since the previous call.</p></li>
<li><p><strong>keep_counter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Keep the turn number from the previous
call.</p></li>
<li><p><strong>turn</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Starting turn number. Ignored if
<em>keep_counter</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. The turn number is necessary to
compute the absolute path length used in RFCavityPass.</p></li>
<li><p><strong>losses</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Boolean to activate loss maps output</p></li>
<li><p><strong>omp_num_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of OpenMP threads
(default: automatic)</p></li>
</ul>
</dd>
</dl>
<p>The following keyword arguments overload the lattice values</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>particle</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="at.lattice.particle_object.html#at.lattice.particle_object.Particle" title="at.lattice.particle_object.Particle"><em>Particle</em></a><em>]</em>) – circulating particle.
Default: <code class="code docutils literal notranslate"><span class="pre">lattice.particle</span></code> if existing,
otherwise <code class="code docutils literal notranslate"><span class="pre">Particle('relativistic')</span></code></p></li>
<li><p><strong>energy</strong> (<em>Optiona</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – lattice energy. Default 0.</p></li>
<li><p><strong>unfold_beam</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Internal beam folding activate, this
assumes the input particles are in bucket 0, works only
if all bucket see the same RF Voltage.
Default: <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
</ul>
</dd>
</dl>
<p>If <em>energy</em> is not available, relativistic tracking if forced,
<em>rest_energy</em> is ignored.</p>
<dl class="field-list">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>r_out</strong> – (6, N, R, T) array containing output coordinates of N particles
at R reference points for T turns</p></li>
<li><p><strong>trackparam</strong> – A dictionary containing tracking input parameters with the
following keys:</p></li>
<li><p><strong>trackdata</strong> – A dictionary containinf tracking data with the following
keys:</p></li>
<li><p><strong>The **loss_map</strong> is filled only if <em>losses</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>,** – it contains the following keys:
==============    ===================================================
<strong>islost</strong>        (npart,) bool array indicating lost particles
<strong>turn</strong>          (npart,) int array indicating the turn at</p>
<blockquote>
<div><p>which the particle is lost</p>
</div></blockquote>
<dl class="simple">
<dt><strong>element</strong>       ((npart,) int array indicating the element at</dt><dd><p>which the particle is lost</p>
</dd>
<dt><strong>coord</strong>         (npart, 6) float array giving the coordinates at</dt><dd><p>which the particle is lost (zero for surviving
particles)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="code highlight pycode python docutils literal highlight-python"><span class="n">track_function</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">))</span></code> is the same
as <code class="code highlight pycode python docutils literal highlight-python"><span class="n">track_function</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">)</span></code> since the reference point
len(line) is the exit of the last element.</p></li>
<li><p><code class="code highlight pycode python docutils literal highlight-python"><span class="n">track_function</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code> is a copy of <em>r_in</em>
since the reference point 0 is the entrance of the first element.</p></li>
<li><p>To resume an interrupted tracking (for instance to get intermediate
results), one must use one of the <em>turn</em> or <em>keep_counter</em>
keywords to ensure the continuity of the turn number.</p></li>
<li><p>For multiparticle tracking with large number of turn the size of
<em>r_out</em> may increase excessively. To avoid memory issues
<code class="code highlight pycode python docutils literal highlight-python"><span class="n">track_function</span><span class="p">(</span><span class="n">lattice</span><span class="p">,</span> <span class="n">r_in</span><span class="p">,</span> <span class="n">refpts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>
can be used. An empty list is returned and the tracking results of
the last turn are stored in <em>r_in</em>.</p></li>
<li><p>To model buckets with different RF voltage <code class="code highlight pycode python docutils literal highlight-python"><span class="n">unfold_beam</span><span class="o">=</span><span class="kc">False</span></code>
has to be used. The beam can be unfolded using the function
<a class="reference internal" href="at.tracking.utils.html#at.tracking.utils.unfold_beam" title="at.tracking.utils.unfold_beam"><code class="xref py py-func docutils literal notranslate"><span class="pre">unfold_beam()</span></code></a>. This function takes into account
the true voltage in each bucket and distributes the particles in the
bunches defined by <code class="code docutils literal notranslate"><span class="pre">ring.fillpattern</span></code> using a 6D orbit search.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.uint32_refpts">
<span class="sig-name descname"><span class="pre">uint32_refpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.uint32_refpts" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an integer array of element indices, selecting ring elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refpts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.11)"><em>Type</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em><em>, </em><em>RefptsCode</em><em>]</em>) – Element selection key.
See “<a class="reference internal" href="at.lattice.utils.html#refpts"><span class="std std-ref">Selecting elements in a lattice</span></a>”</p></li>
<li><p><strong>endpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, allow <em>len(ring)</em> as a
special index, referring to the end of the last element.</p></li>
<li><p><strong>regex</strong> – Use regular expression for refpts string matching;
Default: False (Unix shell-style wildcards)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>uint32_ref</strong> (<em>Uint32Refpts</em>) – uint32 numpy array used for indexing
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>s in a lattice.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">Sextupole</span><span class="p">)</span>
<span class="go">array([ 21,  27,  35,  89,  97, 103], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array of indices of all <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Sextupole" title="at.lattice.elements.Sextupole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sextupole</span></code></a>s</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">End</span><span class="p">)</span>
<span class="go">array([121], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array([<code class="code highlight pycode python docutils literal highlight-python"><span class="nb">len</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span></code>])</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_uint32_index</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">checkattr</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">))</span>
<span class="go">array([0], dtype=uint32)</span>
</pre></div>
</div>
<p>numpy array of indices of all elements having a ‘Frequency’
attribute</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#Lattice.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.Lattice.update" title="Permalink to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span></dt>
<dd><p>Update the lattice attributes with the given values</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.BRho">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BRho</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.BRho" title="Permalink to this definition">#</a></dt>
<dd><p>Magnetic rigidity [T.m]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.attrs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">attrs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><span class="pre">dict</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.attrs" title="Permalink to this definition">#</a></dt>
<dd><p>Dictionary of lattice attributes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.beam_current">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">beam_current</span></span><a class="headerlink" href="#at.lattice.lattice_object.Lattice.beam_current" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.beta">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">beta</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.beta" title="Permalink to this definition">#</a></dt>
<dd><p>Relativistic <span class="math notranslate nohighlight">\(\beta\)</span> of the particles</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.bunch_currents">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bunch_currents</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.bunch_currents" title="Permalink to this definition">#</a></dt>
<dd><p>Bunch currents [A]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.bunch_list">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bunch_list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.bunch_list" title="Permalink to this definition">#</a></dt>
<dd><p>Indices of filled bunches</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.bunch_spos">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bunch_spos</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.bunch_spos" title="Permalink to this definition">#</a></dt>
<dd><p>Bunch position around the ring [m]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.cell_harmnumber">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cell_harmnumber</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.cell_harmnumber" title="Permalink to this definition">#</a></dt>
<dd><p>Harmonic number per cell</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.harmonic_number" title="at.lattice.lattice_object.Lattice.harmonic_number"><code class="xref py py-meth docutils literal notranslate"><span class="pre">harmonic_number()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.cell_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cell_length</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.cell_length" title="Permalink to this definition">#</a></dt>
<dd><p>Cell length (1 cell) [m]</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.circumference" title="at.lattice.lattice_object.Lattice.circumference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">circumference()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.cell_revolution_frequency">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cell_revolution_frequency</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.cell_revolution_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Revolution frequency for 1 cell [Hz]</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.revolution_frequency" title="at.lattice.lattice_object.Lattice.revolution_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">revolution_frequency()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.circumference">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">circumference</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.circumference" title="Permalink to this definition">#</a></dt>
<dd><p>Ring circumference (full ring) [m]</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.cell_length" title="at.lattice.lattice_object.Lattice.cell_length"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_length()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.energy">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">energy</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.energy" title="Permalink to this definition">#</a></dt>
<dd><p>Lattice energy</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.energy_loss">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">energy_loss</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.energy_loss" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the energy loss per turn</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – Lattice description</p></li>
<li><p><strong>method</strong> – Method for energy loss computation.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">ELossMethod</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>eloss</strong> (<em>float</em>) – Energy loss per turn [eV]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.fillpattern">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fillpattern</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.fillpattern" title="Permalink to this definition">#</a></dt>
<dd><p>Filling pattern describing the bunch relative
amplitudes such that <code class="docutils literal notranslate"><span class="pre">sum(fillpattern)=1</span></code></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.gamma">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">gamma</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.gamma" title="Permalink to this definition">#</a></dt>
<dd><p>Relativistic <span class="math notranslate nohighlight">\(\gamma\)</span> of the particles</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.harmonic_number">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">harmonic_number</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.harmonic_number" title="Permalink to this definition">#</a></dt>
<dd><p>Ring harmonic number (full ring)</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.cell_harmnumber" title="at.lattice.lattice_object.Lattice.cell_harmnumber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_harmnumber()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.has_cavity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_cavity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.has_cavity" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the lattice contains an active
<code class="xref py py-class docutils literal notranslate"><span class="pre">RFCavity</span></code></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.i_range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">i_range</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><span class="pre">ndarray</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.i_range" title="Permalink to this definition">#</a></dt>
<dd><p>Range of elements inside the range of interest</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.is_6d">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_6d</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.is_6d" title="Permalink to this definition">#</a></dt>
<dd><p>True if at least one element modifies the beam momentum</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.enable_6d" title="at.lattice.lattice_object.Lattice.enable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_6d()</span></code></a>, <a class="reference internal" href="#at.lattice.lattice_object.Lattice.disable_6d" title="at.lattice.lattice_object.Lattice.disable_6d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disable_6d()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.is_collective">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_collective</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.is_collective" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if any element involves collective effects</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.mcf">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mcf</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.mcf" title="Permalink to this definition">#</a></dt>
<dd><p>Momentum compaction factor</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.nbunch">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nbunch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.nbunch" title="Permalink to this definition">#</a></dt>
<dd><p>Number of bunches</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.particle">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">particle</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="at.lattice.particle_object.html#at.lattice.particle_object.Particle" title="at.lattice.particle_object.Particle"><span class="pre">Particle</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.particle" title="Permalink to this definition">#</a></dt>
<dd><p>Circulating particle</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.revolution_frequency">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">revolution_frequency</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.revolution_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Revolution frequency (full ring) [Hz]</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#at.lattice.lattice_object.Lattice.cell_revolution_frequency" title="at.lattice.lattice_object.Lattice.cell_revolution_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cell_revolution_frequency()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.rf_frequency">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rf_frequency</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.rf_frequency" title="Permalink to this definition">#</a></dt>
<dd><p>Fundamental RF frequency [Hz]. The special value <a class="reference internal" href="at.lattice.cavity_access.html#at.lattice.cavity_access.Frf" title="at.lattice.cavity_access.Frf"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frf.NOMINAL</span></code></a> means nominal frequency.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.rf_timelag">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rf_timelag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.rf_timelag" title="Permalink to this definition">#</a></dt>
<dd><p>Time lag of the fundamental mode [m]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.rf_voltage">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rf_voltage</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.rf_voltage" title="Permalink to this definition">#</a></dt>
<dd><p>RF voltage of the full ring [V]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.s_range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">s_range</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.s_range" title="Permalink to this definition">#</a></dt>
<dd><p>(s_min, s_max). <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> means
the full cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Range of interest</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.lattice.lattice_object.Lattice.slip_factor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">slip_factor</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#at.lattice.lattice_object.Lattice.slip_factor" title="Permalink to this definition">#</a></dt>
<dd><p>Slip factor</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.lattice.lattice_object.elem_generator">
<span class="sig-name descname"><span class="pre">elem_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#elem_generator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.elem_generator" title="Permalink to this definition">#</a></dt>
<dd><p>Run through all elements without any check</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – Dictionary of Lattice attributes</p></li>
<li><p><strong>elems</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Iterable of lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.lattice.lattice_object.lattice_filter">
<span class="sig-name descname"><span class="pre">lattice_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lattice</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#lattice_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.lattice_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Copy lattice parameters and run through all lattice elements</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – Dictionary of Lattice attributes</p></li>
<li><p><strong>lattice</strong> – Input <code class="docutils literal notranslate"><span class="pre">Lattice</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.lattice.lattice_object.no_filter">
<span class="sig-name descname"><span class="pre">no_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elems</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.lattice.lattice_object.no_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Run through all elements without any check</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – Dictionary of Lattice attributes</p></li>
<li><p><strong>elems</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Iterable of lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.lattice.lattice_object.params_filter">
<span class="sig-name descname"><span class="pre">params_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem_filter</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#params_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.params_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Run through all elements, looking for energy and periodicity.
Remove the Energy attribute of non-radiating elements</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – Dictionary of Lattice attributes</p></li>
<li><p><strong>elem_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em><em>]</em>) – Next <code class="docutils literal notranslate"><span class="pre">Elements</span></code> filter</p></li>
<li><p><strong>args</strong> – Arguments forwarded to <strong>elem_filter</strong></p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p>
</dd>
</dl>
<p>The following keys in <code class="docutils literal notranslate"><span class="pre">params</span></code> are set:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">periodicity</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">energy</span></code> (optional)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_frequency</span></code> (optional)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">harmonic_number</span></code> (optional)</p></li>
</ul>
<dl class="simple">
<dt>energy is taken from:</dt><dd><ol class="arabic simple">
<li><p>The params dictionary</p></li>
<li><p>Cavity elements</p></li>
<li><p>Any other element</p></li>
</ol>
</dd>
<dt>periodicity is taken from:</dt><dd><ol class="arabic simple">
<li><p>The params dictionary</p></li>
<li><p>Sum of the bending angles of magnets</p></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.lattice.lattice_object.type_filter">
<span class="sig-name descname"><span class="pre">type_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/lattice/lattice_object.html#type_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.lattice.lattice_object.type_filter" title="Permalink to this definition">#</a></dt>
<dd><p>Run through all elements and check element validity.
Analyse elements for radiation state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – Dictionary of Lattice attributes</p></li>
<li><p><strong>elems</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Element" title="at.lattice.elements.Element"><em>Element</em></a><em>]</em>) – Iterable of lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>lattice <code class="docutils literal notranslate"><span class="pre">Elements</span></code></p>
</dd>
</dl>
</dd></dl>

</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="at.lattice.idtable_element.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">at.lattice.idtable_element</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="at.lattice.options.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">at.lattice.options</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice">
   <code class="docutils literal notranslate">
    <span class="pre">
     Lattice
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.append">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.append()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.attrs_filter">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.attrs_filter()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.avlinopt">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.avlinopt()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.bool_refpts">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.bool_refpts()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.concatenate">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.concatenate()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.copy">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.copy()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.deepcopy">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.deepcopy()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.develop">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.develop()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.disable_6d">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.disable_6d()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.enable_6d">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.enable_6d()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.envelope_parameters">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.envelope_parameters()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.extend">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.extend()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_m44">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_m44()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_m66">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_m66()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_orbit">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_orbit()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_orbit4">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_orbit4()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_orbit6">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_orbit6()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.find_sync_orbit">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.find_sync_orbit()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_acceptance">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_acceptance()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_beam_current">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_beam_current()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_bool_index">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_bool_index()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_bunch_length_espread">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_bunch_length_espread()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_cells">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_cells()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_chrom">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_chrom()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_elements">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_elements()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_energy_loss">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_energy_loss()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_geometry">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_geometry()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_horizontal_acceptance">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_horizontal_acceptance()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_lifetime">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_lifetime()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_mcf">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_mcf()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_momentum_acceptance">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_momentum_acceptance()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_optics">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_optics()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_radiation_integrals">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_radiation_integrals()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_refpts">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_refpts()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_revolution_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_revolution_frequency()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_rf_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_rf_frequency()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_rf_timelag">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_rf_timelag()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_rf_voltage">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_rf_voltage()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_s_pos">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_s_pos()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_scattering_rate">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_scattering_rate()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_slip_factor">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_slip_factor()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_tune">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_tune()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_uint32_index">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_uint32_index()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_value_refpts">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_value_refpts()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.get_vertical_acceptance">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.get_vertical_acceptance()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.insert">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.insert()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.lattice_pass">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.lattice_pass()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.linopt2">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.linopt2()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.linopt4">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.linopt4()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.linopt6">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.linopt6()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.load">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.load()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.modify_elements">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.modify_elements()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.ohmi_envelope">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.ohmi_envelope()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.plot_acceptance">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.plot_acceptance()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.plot_beta">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.plot_beta()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.plot_geometry">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.plot_geometry()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.plot_trajectory">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.plot_trajectory()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.radiation_off">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.radiation_off()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.radiation_on">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.radiation_on()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.radiation_parameters">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.radiation_parameters()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.reduce">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.reduce()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.refcount">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.refcount()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.repeat">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.repeat()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.replace">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.replace()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.reverse">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.reverse()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.rotate">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.rotate()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.save">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.save()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.sbreak">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.sbreak()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.select">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.select()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_beam_current">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_beam_current()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_cavity">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_cavity()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_cavity_phase">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_cavity_phase()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_fillpattern">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_fillpattern()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_rf_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_rf_frequency()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_rf_timelag">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_rf_timelag()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_rf_voltage">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_rf_voltage()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_shift">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_shift()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_tilt">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_tilt()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_value_refpts">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_value_refpts()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.set_wake_turnhistory">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.set_wake_turnhistory()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.slice">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.slice()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.slice_elements">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.slice_elements()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.tapering">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.tapering()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.track">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.track()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.uint32_refpts">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.uint32_refpts()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.update">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.update()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.BRho">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.BRho
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.attrs">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.attrs
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.beam_current">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.beam_current
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.beta">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.beta
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.bunch_currents">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.bunch_currents
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.bunch_list">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.bunch_list
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.bunch_spos">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.bunch_spos
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.cell_harmnumber">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.cell_harmnumber
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.cell_length">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.cell_length
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.cell_revolution_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.cell_revolution_frequency
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.circumference">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.circumference
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.energy">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.energy
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.energy_loss">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.energy_loss
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.fillpattern">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.fillpattern
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.gamma">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.gamma
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.harmonic_number">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.harmonic_number
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.has_cavity">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.has_cavity
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.i_range">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.i_range
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.is_6d">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.is_6d
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.is_collective">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.is_collective
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.mcf">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.mcf
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.nbunch">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.nbunch
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.particle">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.particle
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.revolution_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.revolution_frequency
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.rf_frequency">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.rf_frequency
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.rf_timelag">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.rf_timelag
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.rf_voltage">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.rf_voltage
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.s_range">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.s_range
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#at.lattice.lattice_object.Lattice.slip_factor">
     <code class="docutils literal notranslate">
      <span class="pre">
       Lattice.slip_factor
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.elem_generator">
   <code class="docutils literal notranslate">
    <span class="pre">
     elem_generator()
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.lattice_filter">
   <code class="docutils literal notranslate">
    <span class="pre">
     lattice_filter()
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.no_filter">
   <code class="docutils literal notranslate">
    <span class="pre">
     no_filter()
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.params_filter">
   <code class="docutils literal notranslate">
    <span class="pre">
     params_filter()
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#at.lattice.lattice_object.type_filter">
   <code class="docutils literal notranslate">
    <span class="pre">
     type_filter()
    </span>
   </code>
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, ATCollab.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>